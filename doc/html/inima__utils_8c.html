<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TIPS: /renoir/fourmano/Desktop/OUSIM/TIPS/branches/tips_build/src/axesim/inima_utils.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>/renoir/fourmano/Desktop/OUSIM/TIPS/branches/tips_build/src/axesim/inima_utils.c File Reference</h1><code>#include &lt;ctype.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;assert.h&gt;</code><br/>
<code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="spc__cfg_8h_source.html">spc_cfg.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="aXe__grism_8h_source.html">aXe_grism.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="aXe__errors_8h_source.html">aXe_errors.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="inima__utils_8h_source.html">inima_utils.h</a>&quot;</code><br/>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Namespaces</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">namespace &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceinima__utils.html">inima_utils</a></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structaxe__inputs.html">axe_inputs</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inima__utils_8c.html#a7a2221c6ec7fd0d5fa6763a4176b1b0a">get_axe_inputs</a> (char inima[], char confterm[])</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inima__utils_8c.html#a89edcc53ef73bfa07643214f34b74740">copy_basic_input</a> (<a class="el" href="structchar__array.html">char_array</a> *line_array, <a class="el" href="structchar__array.html">char_array</a> *iol_array, <a class="el" href="structchar__array.html">char_array</a> *conf_array, int arr_index, int dirim_col, int dmag_col, <a class="el" href="structbasic__input.html">basic_input</a> *axe_item)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structaxe__inputs.html">axe_inputs</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inima__utils_8c.html#a5169febfb6d202bcd3a114c7606b9c5d">extract_axe_inputs</a> (char inima[], char confterm[], int nrows, int nmult, int dirim_col, int conf_col, int dmag_col)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inima__utils_8c.html#aba4979a845801955e4934f28433c60ca">get_inima_cols</a> (char inima[], int *dirim_col, int *conf_col, int *dmag_col, int *nmult)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inima__utils_8c.html#afcb4a73748cbbdafbb61941d642507d1">get_inlist_basics</a> (char inima[], int *nrows, int *ncols)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structchar__array.html">char_array</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inima__utils_8c.html#ab67048e9322493d5c241863cffb655c7">get_items</a> (char input_line[], char tokens[])</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inima__utils_8c.html#aeeac181d0eee781be4340cf86addf1bb">is_valid_inima_line</a> (char input_line[])</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inima__utils_8c.html#a880cc2a273358cd9dc41dcc6a2dbea04">get_nitems</a> (char input_line[], char tokens[])</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structchar__array.html">char_array</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inima__utils_8c.html#a2586f1aa61d1108da202b18134a74a97">alloc_char_array</a> (int nitems)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inima__utils_8c.html#a6a508b8dc33fcd6c1de2cb5a5c0f7a7e">free_char_array</a> (<a class="el" href="structchar__array.html">char_array</a> *an_array)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inima__utils_8c.html#aced1a5c36aa2d862ae401791f3cbae64">print_char_array</a> (<a class="el" href="structchar__array.html">char_array</a> *an_array)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structaxe__inputs.html">axe_inputs</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inima__utils_8c.html#a9b85fe6c9967cfe6ce19a66585018fff">alloc_axe_inputs</a> (int nitems)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inima__utils_8c.html#ac010f00e95013798e29665c32049458f">free_axe_inputs</a> (<a class="el" href="structaxe__inputs.html">axe_inputs</a> *in_list)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inima__utils_8c.html#a1caa9871ceda5b9804538463e2938f00">print_axe_inputs</a> (<a class="el" href="structaxe__inputs.html">axe_inputs</a> *in_list)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="inima__utils_8c.html#a14ba84193a14d8e152018858dbac07b4">trim</a> (char inString[], char outString[])</td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a9b85fe6c9967cfe6ce19a66585018fff"></a><!-- doxytag: member="inima_utils.c::alloc_axe_inputs" ref="a9b85fe6c9967cfe6ce19a66585018fff" args="(int nitems)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structaxe__inputs.html">axe_inputs</a>* alloc_axe_inputs </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>nitems</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function: alloc_axe_inputs</p>
<p>The function allocates memory for an 'axe_inputs' structure with a defined number of entries of type <a class="el" href="structbasic__input.html">basic_input</a>.</p>
<p>Parameters: </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>nitems</em>&nbsp;</td><td>- the number of items in the aXe input list</td></tr>
  </table>
  </dd>
</dl>
<p>Returns: </p>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="structaxe__inputs.html">axe_inputs</a> - the allocated aXe input structure </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00688"></a>00688 {
<a name="l00689"></a>00689   <a class="code" href="structaxe__inputs.html">axe_inputs</a> *in_list;
<a name="l00690"></a>00690 
<a name="l00691"></a>00691   <span class="comment">//int i;</span>
<a name="l00692"></a>00692 
<a name="l00693"></a>00693   <span class="comment">// allocate memory for the return structure</span>
<a name="l00694"></a>00694   in_list = (<a class="code" href="structaxe__inputs.html">axe_inputs</a> *)malloc(<span class="keyword">sizeof</span>(<a class="code" href="structaxe__inputs.html">axe_inputs</a>));
<a name="l00695"></a>00695 
<a name="l00696"></a>00696   <span class="comment">// allocate the memory for the pointers to the axe items</span>
<a name="l00697"></a>00697   in_list-&gt;<a class="code" href="structaxe__inputs.html#a037661a38868809f953a4a2e47140b88">axe_items</a> = (<a class="code" href="structbasic__input.html">basic_input</a> *)malloc(nitems * <span class="keyword">sizeof</span>(<a class="code" href="structbasic__input.html">basic_input</a>));
<a name="l00698"></a>00698 
<a name="l00699"></a>00699   <span class="comment">// return the allocated structure</span>
<a name="l00700"></a>00700   <span class="keywordflow">return</span> in_list;
<a name="l00701"></a>00701 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2586f1aa61d1108da202b18134a74a97"></a><!-- doxytag: member="inima_utils.c::alloc_char_array" ref="a2586f1aa61d1108da202b18134a74a97" args="(int nitems)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structchar__array.html">char_array</a>* alloc_char_array </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>nitems</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function: alloc_char_array The function allocates memory for a character array structure, which is given back to the calling routine.</p>
<p>Parameters: </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>nitems</em>&nbsp;</td><td>- the number of items in the charcter array</td></tr>
  </table>
  </dd>
</dl>
<p>Returns: </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>an_array - the allocated character array </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00598"></a>00598 {
<a name="l00599"></a>00599   <a class="code" href="structchar__array.html">char_array</a> *an_array;
<a name="l00600"></a>00600 
<a name="l00601"></a>00601   <span class="keywordtype">int</span> i;
<a name="l00602"></a>00602 
<a name="l00603"></a>00603   <span class="comment">// allocate memory for the return structure</span>
<a name="l00604"></a>00604   an_array = (<a class="code" href="structchar__array.html">char_array</a> *)malloc(<span class="keyword">sizeof</span>(<a class="code" href="structchar__array.html">char_array</a>));
<a name="l00605"></a>00605 
<a name="l00606"></a>00606   <span class="comment">// allocate the memory for the pointers to the char data</span>
<a name="l00607"></a>00607   an_array-&gt;<a class="code" href="structchar__array.html#a87868716aa2096e6891988b6a19f5e78">char_items</a> = (<span class="keywordtype">char</span> **)malloc(nitems * <span class="keyword">sizeof</span>(<span class="keywordtype">char</span> *));
<a name="l00608"></a>00608   
<a name="l00609"></a>00609   <span class="comment">// allocate memory for every cha data item</span>
<a name="l00610"></a>00610   <span class="keywordflow">for</span> (i=0; i &lt; nitems; i++) 
<a name="l00611"></a>00611     <span class="comment">// allocate the item</span>
<a name="l00612"></a>00612     an_array-&gt;<a class="code" href="structchar__array.html#a87868716aa2096e6891988b6a19f5e78">char_items</a>[i] = malloc(<a class="code" href="aXe__grism_8h.html#ac1535592e39e7edf0cafbd5e695ea622">MAXCHAR</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>));
<a name="l00613"></a>00613 
<a name="l00614"></a>00614   <span class="keywordflow">return</span> an_array;
<a name="l00615"></a>00615 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a89edcc53ef73bfa07643214f34b74740"></a><!-- doxytag: member="inima_utils.c::copy_basic_input" ref="a89edcc53ef73bfa07643214f34b74740" args="(char_array *line_array, char_array *iol_array, char_array *conf_array, int arr_index, int dirim_col, int dmag_col, basic_input *axe_item)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void copy_basic_input </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structchar__array.html">char_array</a> *&nbsp;</td>
          <td class="paramname"> <em>line_array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structchar__array.html">char_array</a> *&nbsp;</td>
          <td class="paramname"> <em>iol_array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structchar__array.html">char_array</a> *&nbsp;</td>
          <td class="paramname"> <em>conf_array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>arr_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>dirim_col</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>dmag_col</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structbasic__input.html">basic_input</a> *&nbsp;</td>
          <td class="paramname"> <em>axe_item</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function: copy_basic_input The function fills one entry in an 'axe_items'-structure with data from one line of the Input Image List. The data is just transferred as an item list, column indices are already known.</p>
<p>Parameters: </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>line_array</em>&nbsp;</td><td>- the item list of the line </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>iol_array</em>&nbsp;</td><td>- the item list of the Input Object Lists </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>conf_array</em>&nbsp;</td><td>- the item list of the configuration files (from input) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>arr_index</em>&nbsp;</td><td>- the multiplicity index </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dirim_col</em>&nbsp;</td><td>- direct column index </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dmag_col</em>&nbsp;</td><td>- dmag column index </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>axe_item</em>&nbsp;</td><td>- the aXe input to fill</td></tr>
  </table>
  </dd>
</dl>
<p>Returns: </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>- </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00122"></a>00122 {
<a name="l00123"></a>00123   <span class="comment">// define an entry for NULL&apos;s</span>
<a name="l00124"></a>00124   <span class="keywordtype">char</span> null_entry[1] = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00125"></a>00125 
<a name="l00126"></a>00126   <span class="comment">// copy the basic input,</span>
<a name="l00127"></a>00127   <span class="comment">// which is grism file, iol, config file</span>
<a name="l00128"></a>00128   strcpy(axe_item-&gt;<a class="code" href="structbasic__input.html#a051fdba94c858cc9fb7e8fc53aa0cef3">grism_file</a>,  line_array-&gt;<a class="code" href="structchar__array.html#a87868716aa2096e6891988b6a19f5e78">char_items</a>[0]);
<a name="l00129"></a>00129   strcpy(axe_item-&gt;<a class="code" href="structbasic__input.html#aa59577abc77308875fd9a0e102a2bbb2">iol_cat</a>,     iol_array-&gt;<a class="code" href="structchar__array.html#a87868716aa2096e6891988b6a19f5e78">char_items</a>[arr_index]);
<a name="l00130"></a>00130   strcpy(axe_item-&gt;<a class="code" href="structbasic__input.html#ae727f03bb293ff762d591d577d08f9c4">config_file</a>, conf_array-&gt;<a class="code" href="structchar__array.html#a87868716aa2096e6891988b6a19f5e78">char_items</a>[arr_index]);
<a name="l00131"></a>00131 
<a name="l00132"></a>00132   <span class="comment">// check whether a direct image exists,</span>
<a name="l00133"></a>00133   <span class="comment">// copy it over if possible</span>
<a name="l00134"></a>00134   <span class="keywordflow">if</span> (dirim_col &gt; -1)
<a name="l00135"></a>00135     strcpy(axe_item-&gt;<a class="code" href="structbasic__input.html#a7abc1ca0b2f0e2baa263a5cd29015ded">dirima_file</a>, line_array-&gt;<a class="code" href="structchar__array.html#a87868716aa2096e6891988b6a19f5e78">char_items</a>[dirim_col]);
<a name="l00136"></a>00136   <span class="keywordflow">else</span>
<a name="l00137"></a>00137     <span class="comment">// store the NULL value    </span>
<a name="l00138"></a>00138     strcpy(axe_item-&gt;<a class="code" href="structbasic__input.html#a7abc1ca0b2f0e2baa263a5cd29015ded">dirima_file</a>, null_entry);
<a name="l00139"></a>00139     
<a name="l00140"></a>00140   <span class="comment">// check whether a dmag value exists</span>
<a name="l00141"></a>00141   <span class="comment">// copy it over if possible</span>
<a name="l00142"></a>00142   <span class="keywordflow">if</span> (dmag_col &gt; -1)
<a name="l00143"></a>00143     axe_item-&gt;<a class="code" href="structbasic__input.html#af35e90aa0f78ac5e17303fcd332f1423">dmag</a> = atof(line_array-&gt;<a class="code" href="structchar__array.html#a87868716aa2096e6891988b6a19f5e78">char_items</a>[dmag_col]);
<a name="l00144"></a>00144   <span class="keywordflow">else</span>
<a name="l00145"></a>00145     <span class="comment">// store the NULL value</span>
<a name="l00146"></a>00146     axe_item-&gt;<a class="code" href="structbasic__input.html#af35e90aa0f78ac5e17303fcd332f1423">dmag</a> = 0.0;
<a name="l00147"></a>00147 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5169febfb6d202bcd3a114c7606b9c5d"></a><!-- doxytag: member="inima_utils.c::extract_axe_inputs" ref="a5169febfb6d202bcd3a114c7606b9c5d" args="(char inima[], char confterm[], int nrows, int nmult, int dirim_col, int conf_col, int dmag_col)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structaxe__inputs.html">axe_inputs</a>* extract_axe_inputs </td>
          <td>(</td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>inima</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>confterm</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>nrows</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>nmult</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>dirim_col</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>conf_col</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>dmag_col</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function: extract_axe_inputs The function converts the data given in an Input Image List and in the line input (for aXe configuration files) to a list of aXe inputs. the columns to find optional inputs such as direct images are given as parameters. The filled structure with the aXe inputs is returned.</p>
<p>Parameters: </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>inima</em>&nbsp;</td><td>- the name of the input image list </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>confterm</em>&nbsp;</td><td>- the configuration files given in the input </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>nrows</em>&nbsp;</td><td>- the number of rows </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>nmult</em>&nbsp;</td><td>- the multiplicity </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dirim_col</em>&nbsp;</td><td>- the direct column index </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>conf_col</em>&nbsp;</td><td>- the configuration column index </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dmag_col</em>&nbsp;</td><td>- the dmag column index</td></tr>
  </table>
  </dd>
</dl>
<p>Returns: </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>in_list - the resolved list of aXe inputs </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00172"></a>00172 {  
<a name="l00173"></a>00173   FILE *flist;
<a name="l00174"></a>00174 
<a name="l00175"></a>00175   <span class="keywordtype">char</span> Buffer[<a class="code" href="spc__cfg_8h.html#a7cb4067a69f1bac9fa25877339c97ab8">LINE_LEN_MAX</a>];
<a name="l00176"></a>00176   <span class="keywordtype">char</span> input[<a class="code" href="spc__cfg_8h.html#a7cb4067a69f1bac9fa25877339c97ab8">LINE_LEN_MAX</a>];
<a name="l00177"></a>00177 
<a name="l00178"></a>00178   <a class="code" href="structaxe__inputs.html">axe_inputs</a> *in_list;
<a name="l00179"></a>00179 
<a name="l00180"></a>00180   <span class="comment">//char null_entry[1] = &quot;&quot;;</span>
<a name="l00181"></a>00181 
<a name="l00182"></a>00182   <a class="code" href="structchar__array.html">char_array</a> *line_array;
<a name="l00183"></a>00183   <a class="code" href="structchar__array.html">char_array</a> *conf_array;
<a name="l00184"></a>00184   <a class="code" href="structchar__array.html">char_array</a> *iol_array;
<a name="l00185"></a>00185 
<a name="l00186"></a>00186   <span class="keywordtype">int</span> index=0;
<a name="l00187"></a>00187   <span class="keywordtype">int</span> arr_index=0;
<a name="l00188"></a>00188 
<a name="l00189"></a>00189   in_list = <a class="code" href="inima__utils_8c.html#a9b85fe6c9967cfe6ce19a66585018fff">alloc_axe_inputs</a>(nrows * nmult);
<a name="l00190"></a>00190   in_list-&gt;<a class="code" href="structaxe__inputs.html#a0cd390c5a8f9bb931dffdfee8f646e19">nitems</a> = nrows * nmult;
<a name="l00191"></a>00191 
<a name="l00192"></a>00192   <span class="comment">// check whether the Input Image List exists</span>
<a name="l00193"></a>00193   flist = fopen (inima, <span class="stringliteral">&quot;r&quot;</span>);
<a name="l00194"></a>00194 
<a name="l00195"></a>00195   <span class="comment">// reset the counter</span>
<a name="l00196"></a>00196   index=0;
<a name="l00197"></a>00197 
<a name="l00198"></a>00198   <span class="comment">// load each line of the Input Image List</span>
<a name="l00199"></a>00199   <span class="keywordflow">while</span> (fgets (Buffer, <a class="code" href="spc__cfg_8h.html#a7cb4067a69f1bac9fa25877339c97ab8">LINE_LEN_MAX</a>, flist) != NULL)
<a name="l00200"></a>00200     {
<a name="l00201"></a>00201       <span class="comment">// leave the loop if there is a valid line</span>
<a name="l00202"></a>00202       <span class="keywordflow">if</span> (!<a class="code" href="inima__utils_8c.html#aeeac181d0eee781be4340cf86addf1bb">is_valid_inima_line</a>(Buffer))
<a name="l00203"></a>00203         <span class="keywordflow">continue</span>;
<a name="l00204"></a>00204 
<a name="l00205"></a>00205       <span class="comment">// trim the input line</span>
<a name="l00206"></a>00206       <a class="code" href="inima__utils_8c.html#a14ba84193a14d8e152018858dbac07b4">trim</a>(Buffer, input);
<a name="l00207"></a>00207 
<a name="l00208"></a>00208       <span class="comment">// tokinze the input line</span>
<a name="l00209"></a>00209       line_array = <a class="code" href="inima__utils_8c.html#ab67048e9322493d5c241863cffb655c7">get_items</a>(input, <span class="stringliteral">&quot; &quot;</span>);
<a name="l00210"></a>00210 
<a name="l00211"></a>00211       <span class="comment">// tokenize the configuration term</span>
<a name="l00212"></a>00212       iol_array = <a class="code" href="inima__utils_8c.html#ab67048e9322493d5c241863cffb655c7">get_items</a>(line_array-&gt;<a class="code" href="structchar__array.html#a87868716aa2096e6891988b6a19f5e78">char_items</a>[1], <span class="stringliteral">&quot;,&quot;</span>);
<a name="l00213"></a>00213 
<a name="l00214"></a>00214       <span class="comment">// check the number of IOL&apos;s against</span>
<a name="l00215"></a>00215       <span class="comment">// the multiplicity</span>
<a name="l00216"></a>00216       <span class="keywordflow">if</span> (iol_array-&gt;<a class="code" href="structchar__array.html#ae2389996d16d5042051c140ce66db2ad">nitems</a> != nmult)
<a name="l00217"></a>00217         <span class="comment">// report the error and go out</span>
<a name="l00218"></a>00218         <a class="code" href="aXe__errors_8c.html#a7ef7588e5f91237ba7ce4084e6ed3c11">aXe_message</a> (<a class="code" href="aXe__errors_8h.html#a2556a67874555249b07691c37aa6d6e9">aXe_M_FATAL</a>, __FILE__, __LINE__,
<a name="l00219"></a>00219                      <span class="stringliteral">&quot;extract_axe_inputs: Number of IOL&apos;s in \&quot;%s\&quot; conflicts with multiplicity (%i) !\n&quot;</span>, line_array-&gt;<a class="code" href="structchar__array.html#a87868716aa2096e6891988b6a19f5e78">char_items</a>[1], nmult);
<a name="l00220"></a>00220       
<a name="l00221"></a>00221       <span class="comment">// get the aXe configuration files</span>
<a name="l00222"></a>00222       <span class="comment">// either from the line of from the command input</span>
<a name="l00223"></a>00223       <span class="keywordflow">if</span> (conf_col &gt; -1)
<a name="l00224"></a>00224         {
<a name="l00225"></a>00225           conf_array = <a class="code" href="inima__utils_8c.html#ab67048e9322493d5c241863cffb655c7">get_items</a>(line_array-&gt;<a class="code" href="structchar__array.html#a87868716aa2096e6891988b6a19f5e78">char_items</a>[conf_col], <span class="stringliteral">&quot;,&quot;</span>);
<a name="l00226"></a>00226           <span class="comment">// check the number of IOL&apos;s against</span>
<a name="l00227"></a>00227           <span class="comment">// the multiplicity</span>
<a name="l00228"></a>00228           <span class="keywordflow">if</span> (conf_array-&gt;<a class="code" href="structchar__array.html#ae2389996d16d5042051c140ce66db2ad">nitems</a> != nmult)
<a name="l00229"></a>00229             <span class="comment">// report the error and go out</span>
<a name="l00230"></a>00230             <a class="code" href="aXe__errors_8c.html#a7ef7588e5f91237ba7ce4084e6ed3c11">aXe_message</a> (<a class="code" href="aXe__errors_8h.html#a2556a67874555249b07691c37aa6d6e9">aXe_M_FATAL</a>, __FILE__, __LINE__,
<a name="l00231"></a>00231                          <span class="stringliteral">&quot;extract_axe_inputs: Number of Config files in \&quot;%s\&quot; conflicts with multiplicity (%i) !\n&quot;</span>, line_array-&gt;<a class="code" href="structchar__array.html#a87868716aa2096e6891988b6a19f5e78">char_items</a>[conf_col], nmult);
<a name="l00232"></a>00232 
<a name="l00233"></a>00233         }
<a name="l00234"></a>00234       <span class="keywordflow">else</span>
<a name="l00235"></a>00235         {
<a name="l00236"></a>00236           conf_array = <a class="code" href="inima__utils_8c.html#ab67048e9322493d5c241863cffb655c7">get_items</a>(confterm, <span class="stringliteral">&quot;,&quot;</span>);
<a name="l00237"></a>00237         }
<a name="l00238"></a>00238 
<a name="l00239"></a>00239       <span class="comment">// loop over the multiplicity</span>
<a name="l00240"></a>00240       <span class="keywordflow">for</span> (arr_index=0; arr_index &lt; nmult; arr_index++)
<a name="l00241"></a>00241         {
<a name="l00242"></a>00242           <span class="comment">// make a line in the inlist structure</span>
<a name="l00243"></a>00243           <a class="code" href="inima__utils_8c.html#a89edcc53ef73bfa07643214f34b74740">copy_basic_input</a>(line_array, iol_array, conf_array, arr_index, dirim_col,
<a name="l00244"></a>00244                            dmag_col, &amp;in_list-&gt;<a class="code" href="structaxe__inputs.html#a037661a38868809f953a4a2e47140b88">axe_items</a>[index]);
<a name="l00245"></a>00245 
<a name="l00246"></a>00246           <span class="comment">// enhance the counter</span>
<a name="l00247"></a>00247           index++;
<a name="l00248"></a>00248         }
<a name="l00249"></a>00249 
<a name="l00250"></a>00250       <a class="code" href="inima__utils_8c.html#a6a508b8dc33fcd6c1de2cb5a5c0f7a7e">free_char_array</a>(line_array);
<a name="l00251"></a>00251       <a class="code" href="inima__utils_8c.html#a6a508b8dc33fcd6c1de2cb5a5c0f7a7e">free_char_array</a>(iol_array);
<a name="l00252"></a>00252       <a class="code" href="inima__utils_8c.html#a6a508b8dc33fcd6c1de2cb5a5c0f7a7e">free_char_array</a>(conf_array);
<a name="l00253"></a>00253     }
<a name="l00254"></a>00254 
<a name="l00255"></a>00255   <span class="comment">// close the file</span>
<a name="l00256"></a>00256   fclose(flist);
<a name="l00257"></a>00257 
<a name="l00258"></a>00258   <span class="keywordflow">return</span> in_list;
<a name="l00259"></a>00259 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac010f00e95013798e29665c32049458f"></a><!-- doxytag: member="inima_utils.c::free_axe_inputs" ref="ac010f00e95013798e29665c32049458f" args="(axe_inputs *in_list)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void free_axe_inputs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structaxe__inputs.html">axe_inputs</a> *&nbsp;</td>
          <td class="paramname"> <em>in_list</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function: free_axe_inputs</p>
<p>The function releases memory in an 'axe_inputs' structure.</p>
<p>Parameters: </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>in_list</em>&nbsp;</td><td>- the aXe input structure</td></tr>
  </table>
  </dd>
</dl>
<p>Returns: </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>- </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00716"></a>00716 {
<a name="l00717"></a>00717   <span class="comment">// free the item list</span>
<a name="l00718"></a>00718   free(in_list-&gt;<a class="code" href="structaxe__inputs.html#a037661a38868809f953a4a2e47140b88">axe_items</a>);
<a name="l00719"></a>00719 
<a name="l00720"></a>00720   <span class="comment">// free the base structure</span>
<a name="l00721"></a>00721   free(in_list);
<a name="l00722"></a>00722   
<a name="l00723"></a>00723   <span class="comment">// set the structure to NULL</span>
<a name="l00724"></a>00724   in_list = NULL;
<a name="l00725"></a>00725 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a6a508b8dc33fcd6c1de2cb5a5c0f7a7e"></a><!-- doxytag: member="inima_utils.c::free_char_array" ref="a6a508b8dc33fcd6c1de2cb5a5c0f7a7e" args="(char_array *an_array)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void free_char_array </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structchar__array.html">char_array</a> *&nbsp;</td>
          <td class="paramname"> <em>an_array</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function: free_char_array The function releases the memory of a character array.</p>
<p>Parameters: </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>an_array</em>&nbsp;</td><td>- the character array</td></tr>
  </table>
  </dd>
</dl>
<p>Returns: </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>- </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00630"></a>00630 {
<a name="l00631"></a>00631   <span class="keywordtype">int</span> i;
<a name="l00632"></a>00632 
<a name="l00633"></a>00633   <span class="comment">// go over all char data items</span>
<a name="l00634"></a>00634   <span class="keywordflow">for</span> (i=0; i &lt; an_array-&gt;<a class="code" href="structchar__array.html#ae2389996d16d5042051c140ce66db2ad">nitems</a>; i++)
<a name="l00635"></a>00635     {
<a name="l00636"></a>00636       <span class="comment">// free the allocated memory</span>
<a name="l00637"></a>00637       free(an_array-&gt;<a class="code" href="structchar__array.html#a87868716aa2096e6891988b6a19f5e78">char_items</a>[i]);
<a name="l00638"></a>00638     }
<a name="l00639"></a>00639 
<a name="l00640"></a>00640   <span class="comment">// free the pointer to the data items</span>
<a name="l00641"></a>00641   free(an_array-&gt;<a class="code" href="structchar__array.html#a87868716aa2096e6891988b6a19f5e78">char_items</a>);
<a name="l00642"></a>00642 
<a name="l00643"></a>00643   <span class="comment">// fre the whole structure</span>
<a name="l00644"></a>00644   free(an_array);
<a name="l00645"></a>00645 
<a name="l00646"></a>00646   <span class="comment">// set the whole structure to NULL</span>
<a name="l00647"></a>00647   an_array = NULL;
<a name="l00648"></a>00648 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a7a2221c6ec7fd0d5fa6763a4176b1b0a"></a><!-- doxytag: member="inima_utils.c::get_axe_inputs" ref="a7a2221c6ec7fd0d5fa6763a4176b1b0a" args="(char inima[], char confterm[])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structaxe__inputs.html">axe_inputs</a>* get_axe_inputs </td>
          <td>(</td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>inima</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>confterm</em>[]</td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function: get_axe_inputs The function reads the data in the input image list given as the first parameter and extracts all axe input data from it. If the configuration files are not given in the input image list, the aXe configuration files given in the command line is used. All data is stored and returned in an 'axe_inputs' structure.</p>
<p>Parameters: </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>inima</em>&nbsp;</td><td>- the name of the input image list </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>confterm</em>&nbsp;</td><td>- the term for the aXe configuration file(s)</td></tr>
  </table>
  </dd>
</dl>
<p>Returns: </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>in_list - the resolved list of aXe input </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00038"></a>00038 {
<a name="l00039"></a>00039   <a class="code" href="structchar__array.html">char_array</a> *conf_array;
<a name="l00040"></a>00040 
<a name="l00041"></a>00041   <span class="keywordtype">int</span> nrows, ncols;
<a name="l00042"></a>00042   <span class="keywordtype">int</span> dirim_col, conf_col, dmag_col, nmult;
<a name="l00043"></a>00043 
<a name="l00044"></a>00044   <a class="code" href="structaxe__inputs.html">axe_inputs</a> *in_list;
<a name="l00045"></a>00045 
<a name="l00046"></a>00046   FILE *Filelist;
<a name="l00047"></a>00047 
<a name="l00048"></a>00048   <span class="comment">// check whether the Input Image List exists</span>
<a name="l00049"></a>00049   Filelist = fopen (inima, <span class="stringliteral">&quot;r&quot;</span>);
<a name="l00050"></a>00050   <span class="keywordflow">if</span> (NULL == Filelist)
<a name="l00051"></a>00051       <a class="code" href="aXe__errors_8c.html#a7ef7588e5f91237ba7ce4084e6ed3c11">aXe_message</a> (<a class="code" href="aXe__errors_8h.html#a2556a67874555249b07691c37aa6d6e9">aXe_M_FATAL</a>, __FILE__, __LINE__, <span class="stringliteral">&quot;Could not open %s\n&quot;</span>,
<a name="l00052"></a>00052                    inima); 
<a name="l00053"></a>00053   fclose(Filelist);
<a name="l00054"></a>00054 
<a name="l00055"></a>00055   <span class="comment">// convert the configuration term</span>
<a name="l00056"></a>00056   <span class="comment">// into a character array</span>
<a name="l00057"></a>00057   conf_array = <a class="code" href="inima__utils_8c.html#ab67048e9322493d5c241863cffb655c7">get_items</a>(confterm, <span class="stringliteral">&quot;,&quot;</span>);
<a name="l00058"></a>00058 
<a name="l00059"></a>00059   <span class="comment">// get the number of rows and the number</span>
<a name="l00060"></a>00060   <span class="comment">// of items per row in the input image list</span>
<a name="l00061"></a>00061   <a class="code" href="inima__utils_8c.html#afcb4a73748cbbdafbb61941d642507d1">get_inlist_basics</a>(inima, &amp;nrows, &amp;ncols);
<a name="l00062"></a>00062 
<a name="l00063"></a>00063   <span class="comment">// there mus be at least two columns,</span>
<a name="l00064"></a>00064   <span class="comment">// one with the grism file and one with the IOL</span>
<a name="l00065"></a>00065   <span class="keywordflow">if</span> (ncols &lt; 2)
<a name="l00066"></a>00066     <a class="code" href="aXe__errors_8c.html#a7ef7588e5f91237ba7ce4084e6ed3c11">aXe_message</a> (<a class="code" href="aXe__errors_8h.html#a2556a67874555249b07691c37aa6d6e9">aXe_M_FATAL</a>, __FILE__, __LINE__,
<a name="l00067"></a>00067                  <span class="stringliteral">&quot;get_axe_inputs: less than 2 items inlist: %s\n&quot;</span>, inima); 
<a name="l00068"></a>00068 
<a name="l00069"></a>00069   <span class="comment">// analyze the content of the input image list.</span>
<a name="l00070"></a>00070   <span class="comment">// find the multiplicity, which is the number of</span>
<a name="l00071"></a>00071   <span class="comment">// extensions in the grism image, and find the columns</span>
<a name="l00072"></a>00072   <span class="comment">// for dmag, direct image and configuration files</span>
<a name="l00073"></a>00073   <a class="code" href="inima__utils_8c.html#aba4979a845801955e4934f28433c60ca">get_inima_cols</a>(inima, &amp;dirim_col, &amp;conf_col, &amp;dmag_col, &amp;nmult);
<a name="l00074"></a>00074 
<a name="l00075"></a>00075 
<a name="l00076"></a>00076   <span class="comment">// check whether the multiplicity from the file</span>
<a name="l00077"></a>00077   <span class="comment">// is consistent with the multiplicity from</span>
<a name="l00078"></a>00078   <span class="comment">// the configterm-input</span>
<a name="l00079"></a>00079   <span class="keywordflow">if</span> (nmult != conf_array-&gt;<a class="code" href="structchar__array.html#ae2389996d16d5042051c140ce66db2ad">nitems</a>)
<a name="l00080"></a>00080     {
<a name="l00081"></a>00081       <span class="comment">// report the error and go out</span>
<a name="l00082"></a>00082       <a class="code" href="aXe__errors_8c.html#a7ef7588e5f91237ba7ce4084e6ed3c11">aXe_message</a> (<a class="code" href="aXe__errors_8h.html#a2556a67874555249b07691c37aa6d6e9">aXe_M_FATAL</a>, __FILE__, __LINE__,
<a name="l00083"></a>00083                    <span class="stringliteral">&quot;get_axe_inputs: Number of configs from input (%i) conflicts with multiplicity (%i) !\n&quot;</span>, conf_array-&gt;<a class="code" href="structchar__array.html#ae2389996d16d5042051c140ce66db2ad">nitems</a>, nmult); 
<a name="l00084"></a>00084       <span class="comment">//      fprintf(stderr, &quot;ERROR: Number of configs from input (%i) conflicts with multiplicity (%i) !\n&quot;, conf_array-&gt;nitems, nmult);</span>
<a name="l00085"></a>00085       <span class="comment">//      exit(1);</span>
<a name="l00086"></a>00086     }
<a name="l00087"></a>00087 
<a name="l00088"></a>00088   <span class="comment">// convert the input to an axe_inputs structure</span>
<a name="l00089"></a>00089   in_list = <a class="code" href="inima__utils_8c.html#a5169febfb6d202bcd3a114c7606b9c5d">extract_axe_inputs</a>(inima, confterm, nrows, nmult,
<a name="l00090"></a>00090                                dirim_col, conf_col, dmag_col);
<a name="l00091"></a>00091 
<a name="l00092"></a>00092   <span class="comment">// free the memory</span>
<a name="l00093"></a>00093   <a class="code" href="inima__utils_8c.html#a6a508b8dc33fcd6c1de2cb5a5c0f7a7e">free_char_array</a>(conf_array);
<a name="l00094"></a>00094 
<a name="l00095"></a>00095   <span class="comment">// return the resulting structure</span>
<a name="l00096"></a>00096   <span class="keywordflow">return</span> in_list;
<a name="l00097"></a>00097 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aba4979a845801955e4934f28433c60ca"></a><!-- doxytag: member="inima_utils.c::get_inima_cols" ref="aba4979a845801955e4934f28433c60ca" args="(char inima[], int *dirim_col, int *conf_col, int *dmag_col, int *nmult)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void get_inima_cols </td>
          <td>(</td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>inima</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>dirim_col</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>conf_col</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>dmag_col</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>nmult</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function: get_inima_cols</p>
<p>The function determines the column number with the dmag-information, the direct image names and the aXe configuration files. It determines the multiplicity, which is the number of input image lists and aXe configuration files per grism image.</p>
<p>Parameters: </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>inima</em>&nbsp;</td><td>- the name of the input image list </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dirim_col</em>&nbsp;</td><td>- the direct column index </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>conf_col</em>&nbsp;</td><td>- the configuration column index </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dmag_col</em>&nbsp;</td><td>- the dmag column index </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>nmult</em>&nbsp;</td><td>- the multiplicity</td></tr>
  </table>
  </dd>
</dl>
<p>Returns: </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>- </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00283"></a>00283 {
<a name="l00284"></a>00284   <a class="code" href="structchar__array.html">char_array</a> *line_array;
<a name="l00285"></a>00285   <a class="code" href="structchar__array.html">char_array</a> *item_array;
<a name="l00286"></a>00286 
<a name="l00287"></a>00287   FILE *flist;
<a name="l00288"></a>00288   <span class="keywordtype">char</span> Buffer[<a class="code" href="spc__cfg_8h.html#a7cb4067a69f1bac9fa25877339c97ab8">LINE_LEN_MAX</a>];
<a name="l00289"></a>00289   <span class="keywordtype">char</span> input[<a class="code" href="spc__cfg_8h.html#a7cb4067a69f1bac9fa25877339c97ab8">LINE_LEN_MAX</a>];
<a name="l00290"></a>00290 
<a name="l00291"></a>00291   <span class="keywordtype">int</span> index=0;
<a name="l00292"></a>00292 
<a name="l00293"></a>00293   <span class="keywordtype">char</span> *t_err;
<a name="l00294"></a>00294 
<a name="l00295"></a>00295   *dirim_col = -1;
<a name="l00296"></a>00296   *conf_col  = -1;
<a name="l00297"></a>00297   *dmag_col  = -1;
<a name="l00298"></a>00298   *nmult     = -1;
<a name="l00299"></a>00299 
<a name="l00300"></a>00300   <span class="keywordtype">float</span> dmag;
<a name="l00301"></a>00301 
<a name="l00302"></a>00302   <span class="comment">// check whether the Input Image List exists</span>
<a name="l00303"></a>00303   flist = fopen (inima, <span class="stringliteral">&quot;r&quot;</span>);
<a name="l00304"></a>00304 
<a name="l00305"></a>00305   <span class="comment">// load each line of the Input Image List</span>
<a name="l00306"></a>00306   <span class="keywordflow">while</span> (fgets (Buffer, <a class="code" href="spc__cfg_8h.html#a7cb4067a69f1bac9fa25877339c97ab8">LINE_LEN_MAX</a>, flist) != NULL)
<a name="l00307"></a>00307     {
<a name="l00308"></a>00308       <span class="comment">// leave the loop if there is a valid line</span>
<a name="l00309"></a>00309       <span class="keywordflow">if</span> (<a class="code" href="inima__utils_8c.html#aeeac181d0eee781be4340cf86addf1bb">is_valid_inima_line</a>(Buffer))
<a name="l00310"></a>00310         <span class="keywordflow">break</span>;
<a name="l00311"></a>00311     }
<a name="l00312"></a>00312   <span class="comment">// close the file</span>
<a name="l00313"></a>00313   fclose(flist);
<a name="l00314"></a>00314 
<a name="l00315"></a>00315   <span class="comment">// get rid of whitespaces</span>
<a name="l00316"></a>00316   <a class="code" href="inima__utils_8c.html#a14ba84193a14d8e152018858dbac07b4">trim</a>(Buffer, input);
<a name="l00317"></a>00317 
<a name="l00318"></a>00318   <span class="comment">// tokenize the line</span>
<a name="l00319"></a>00319   line_array = <a class="code" href="inima__utils_8c.html#ab67048e9322493d5c241863cffb655c7">get_items</a>(input, <span class="stringliteral">&quot; &quot;</span>);
<a name="l00320"></a>00320 
<a name="l00321"></a>00321   <span class="comment">// tokenize the term with the input object lists</span>
<a name="l00322"></a>00322   item_array = <a class="code" href="inima__utils_8c.html#ab67048e9322493d5c241863cffb655c7">get_items</a>(line_array-&gt;<a class="code" href="structchar__array.html#a87868716aa2096e6891988b6a19f5e78">char_items</a>[1], <span class="stringliteral">&quot;,&quot;</span>);
<a name="l00323"></a>00323 
<a name="l00324"></a>00324   <span class="comment">// store the number of items</span>
<a name="l00325"></a>00325   <span class="comment">// derived from the IOL term</span>
<a name="l00326"></a>00326   *nmult = item_array-&gt;<a class="code" href="structchar__array.html#ae2389996d16d5042051c140ce66db2ad">nitems</a>;
<a name="l00327"></a>00327   <a class="code" href="inima__utils_8c.html#a6a508b8dc33fcd6c1de2cb5a5c0f7a7e">free_char_array</a>(item_array);
<a name="l00328"></a>00328 
<a name="l00329"></a>00329   <span class="comment">// go from item three to the end</span>
<a name="l00330"></a>00330   <span class="keywordflow">for</span> (index=2; index &lt; line_array-&gt;<a class="code" href="structchar__array.html#ae2389996d16d5042051c140ce66db2ad">nitems</a>; index++)
<a name="l00331"></a>00331     {
<a name="l00332"></a>00332       <span class="comment">// try to convert the item to a float</span>
<a name="l00333"></a>00333       dmag = strtod(line_array-&gt;<a class="code" href="structchar__array.html#a87868716aa2096e6891988b6a19f5e78">char_items</a>[index], &amp;t_err);
<a name="l00334"></a>00334       
<a name="l00335"></a>00335       <span class="comment">// check whether the conversion to float was successful</span>
<a name="l00336"></a>00336       <span class="keywordflow">if</span> (dmag || strcmp(line_array-&gt;<a class="code" href="structchar__array.html#a87868716aa2096e6891988b6a19f5e78">char_items</a>[index], t_err))
<a name="l00337"></a>00337         <span class="comment">// set the column for the dmag-values</span>
<a name="l00338"></a>00338         *dmag_col = index;
<a name="l00339"></a>00339       <span class="comment">// check whether there is a &quot;.fits&quot; in the item</span>
<a name="l00340"></a>00340       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strstr(line_array-&gt;<a class="code" href="structchar__array.html#a87868716aa2096e6891988b6a19f5e78">char_items</a>[index], <span class="stringliteral">&quot;.fits&quot;</span>))
<a name="l00341"></a>00341         *dirim_col = index;
<a name="l00342"></a>00342       <span class="comment">// if nothing fits, it must be the config file column</span>
<a name="l00343"></a>00343       <span class="keywordflow">else</span>
<a name="l00344"></a>00344         *conf_col = index;
<a name="l00345"></a>00345     }
<a name="l00346"></a>00346       
<a name="l00347"></a>00347   <span class="comment">// if there is a column with aXe configuration files</span>
<a name="l00348"></a>00348   <span class="keywordflow">if</span> (*conf_col &gt; -1)
<a name="l00349"></a>00349     {
<a name="l00350"></a>00350       <span class="comment">// extract the items in an char_array</span>
<a name="l00351"></a>00351       item_array = <a class="code" href="inima__utils_8c.html#ab67048e9322493d5c241863cffb655c7">get_items</a>(line_array-&gt;<a class="code" href="structchar__array.html#a87868716aa2096e6891988b6a19f5e78">char_items</a>[*conf_col], <span class="stringliteral">&quot;,&quot;</span>);
<a name="l00352"></a>00352       
<a name="l00353"></a>00353       <span class="comment">// check the multiplicity</span>
<a name="l00354"></a>00354       <span class="keywordflow">if</span> (item_array-&gt;<a class="code" href="structchar__array.html#ae2389996d16d5042051c140ce66db2ad">nitems</a> != *nmult)
<a name="l00355"></a>00355         <span class="comment">// report the error and go out</span>
<a name="l00356"></a>00356         <a class="code" href="aXe__errors_8c.html#a7ef7588e5f91237ba7ce4084e6ed3c11">aXe_message</a> (<a class="code" href="aXe__errors_8h.html#a2556a67874555249b07691c37aa6d6e9">aXe_M_FATAL</a>, __FILE__, __LINE__,
<a name="l00357"></a>00357                      <span class="stringliteral">&quot;get_inima_cols: Multiplicity from IOL: %i, from Configs: %i\n&quot;</span>, *nmult, item_array-&gt;<a class="code" href="structchar__array.html#ae2389996d16d5042051c140ce66db2ad">nitems</a>);
<a name="l00358"></a>00358 
<a name="l00359"></a>00359       <span class="comment">// release the memory</span>
<a name="l00360"></a>00360       <a class="code" href="inima__utils_8c.html#a6a508b8dc33fcd6c1de2cb5a5c0f7a7e">free_char_array</a>(item_array);
<a name="l00361"></a>00361     }
<a name="l00362"></a>00362 
<a name="l00363"></a>00363   <span class="comment">// release the memory</span>
<a name="l00364"></a>00364   <a class="code" href="inima__utils_8c.html#a6a508b8dc33fcd6c1de2cb5a5c0f7a7e">free_char_array</a>(line_array);
<a name="l00365"></a>00365 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="afcb4a73748cbbdafbb61941d642507d1"></a><!-- doxytag: member="inima_utils.c::get_inlist_basics" ref="afcb4a73748cbbdafbb61941d642507d1" args="(char inima[], int *nrows, int *ncols)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void get_inlist_basics </td>
          <td>(</td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>inima</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>nrows</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>ncols</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function:get_inlist_basics</p>
<p>The function determines the basic format of the input image given as first parameter, which is the number of nonzero, uncommented rows and the number of items in every row. If the number of items changes from row to row, an error is given.</p>
<p>Parameters: </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>inima</em>&nbsp;</td><td>- the name of the input image list </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>nrows</em>&nbsp;</td><td>- the number of rows in the input image list </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ncols</em>&nbsp;</td><td>- the multiplicity</td></tr>
  </table>
  </dd>
</dl>
<p>Returns: </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>- </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00386"></a>00386 {
<a name="l00387"></a>00387   FILE *flist;
<a name="l00388"></a>00388   <span class="keywordtype">char</span> Buffer[<a class="code" href="spc__cfg_8h.html#a7cb4067a69f1bac9fa25877339c97ab8">LINE_LEN_MAX</a>];
<a name="l00389"></a>00389 
<a name="l00390"></a>00390   <span class="keywordtype">int</span> nitems;
<a name="l00391"></a>00391 
<a name="l00392"></a>00392   <span class="comment">//initialize the counters</span>
<a name="l00393"></a>00393   *nrows   =  0;
<a name="l00394"></a>00394   *ncols = -1;
<a name="l00395"></a>00395 
<a name="l00396"></a>00396   <span class="comment">// check whether the Input Image List exists</span>
<a name="l00397"></a>00397   flist = fopen (inima, <span class="stringliteral">&quot;r&quot;</span>);
<a name="l00398"></a>00398 
<a name="l00399"></a>00399   <span class="comment">// load each line of the Input Image List</span>
<a name="l00400"></a>00400   <span class="keywordflow">while</span> (fgets (Buffer, <a class="code" href="spc__cfg_8h.html#a7cb4067a69f1bac9fa25877339c97ab8">LINE_LEN_MAX</a>, flist) != NULL)
<a name="l00401"></a>00401     {
<a name="l00402"></a>00402 
<a name="l00403"></a>00403       <span class="comment">// check whether the line is valid</span>
<a name="l00404"></a>00404       nitems = <a class="code" href="inima__utils_8c.html#aeeac181d0eee781be4340cf86addf1bb">is_valid_inima_line</a>(Buffer);
<a name="l00405"></a>00405 
<a name="l00406"></a>00406       <span class="comment">// go to the nex line</span>
<a name="l00407"></a>00407       <span class="comment">// if the line is NOT valid</span>
<a name="l00408"></a>00408       <span class="keywordflow">if</span> (!nitems)
<a name="l00409"></a>00409         <span class="keywordflow">continue</span>;
<a name="l00410"></a>00410 
<a name="l00411"></a>00411       <span class="comment">// increment the row counter</span>
<a name="l00412"></a>00412       *nrows = *nrows + 1;
<a name="l00413"></a>00413           
<a name="l00414"></a>00414       <span class="comment">// check whether the token counter</span>
<a name="l00415"></a>00415       <span class="comment">// is not yet set</span>
<a name="l00416"></a>00416       <span class="keywordflow">if</span> (*ncols &lt; 0)
<a name="l00417"></a>00417         {
<a name="l00418"></a>00418           <span class="comment">// set the token counter</span>
<a name="l00419"></a>00419           *ncols = nitems;
<a name="l00420"></a>00420         }
<a name="l00421"></a>00421       <span class="keywordflow">else</span>
<a name="l00422"></a>00422         {
<a name="l00423"></a>00423           <span class="comment">// check whether the number</span>
<a name="l00424"></a>00424           <span class="comment">// of tokens disagrees with</span>
<a name="l00425"></a>00425           <span class="comment">// the previous number</span>
<a name="l00426"></a>00426           <span class="keywordflow">if</span> (*ncols != nitems)
<a name="l00427"></a>00427             {
<a name="l00428"></a>00428               <span class="comment">// report the error and go out</span>
<a name="l00429"></a>00429               fclose(flist);
<a name="l00430"></a>00430               <a class="code" href="aXe__errors_8c.html#a7ef7588e5f91237ba7ce4084e6ed3c11">aXe_message</a> (<a class="code" href="aXe__errors_8h.html#a2556a67874555249b07691c37aa6d6e9">aXe_M_FATAL</a>, __FILE__, __LINE__,
<a name="l00431"></a>00431                            <span class="stringliteral">&quot;get_inlist_basics: %i != %i\n&quot;</span>, *ncols, nitems);
<a name="l00432"></a>00432             }
<a name="l00433"></a>00433         }
<a name="l00434"></a>00434     }
<a name="l00435"></a>00435 
<a name="l00436"></a>00436   <span class="comment">// close the file</span>
<a name="l00437"></a>00437   fclose(flist);
<a name="l00438"></a>00438 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab67048e9322493d5c241863cffb655c7"></a><!-- doxytag: member="inima_utils.c::get_items" ref="ab67048e9322493d5c241863cffb655c7" args="(char input_line[], char tokens[])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structchar__array.html">char_array</a>* get_items </td>
          <td>(</td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>input_line</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>tokens</em>[]</td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Funktion: get_items</p>
<p>The function analyzes the input line. It splits the line using the tokens given as second paramter and stores the items in a 'char_array' structure. this structure is finally returned.</p>
<p>Parameters: </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>input_line</em>&nbsp;</td><td>- the character string to analyze </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tokens</em>&nbsp;</td><td>- the tokens to split the string</td></tr>
  </table>
  </dd>
</dl>
<p>Returns: </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>an_array - the list of items in the input </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00457"></a>00457 {
<a name="l00458"></a>00458   <span class="keywordtype">char</span> input[<a class="code" href="spc__cfg_8h.html#a7cb4067a69f1bac9fa25877339c97ab8">LINE_LEN_MAX</a>];
<a name="l00459"></a>00459 
<a name="l00460"></a>00460   <a class="code" href="structchar__array.html">char_array</a> *an_array;
<a name="l00461"></a>00461 
<a name="l00462"></a>00462   <span class="keywordtype">char</span> *tok;
<a name="l00463"></a>00463 
<a name="l00464"></a>00464   <span class="keywordtype">int</span> nitems = 0;
<a name="l00465"></a>00465   <span class="keywordtype">int</span> index    ;
<a name="l00466"></a>00466 
<a name="l00467"></a>00467   <span class="comment">// determine the number of items</span>
<a name="l00468"></a>00468   nitems = <a class="code" href="inima__utils_8c.html#a880cc2a273358cd9dc41dcc6a2dbea04">get_nitems</a>(input_line, tokens);
<a name="l00469"></a>00469 
<a name="l00470"></a>00470   <span class="comment">// allocate an appropriate structure</span>
<a name="l00471"></a>00471   an_array = <a class="code" href="inima__utils_8c.html#a2586f1aa61d1108da202b18134a74a97">alloc_char_array</a>(nitems);
<a name="l00472"></a>00472 
<a name="l00473"></a>00473   <span class="comment">// store the number of items</span>
<a name="l00474"></a>00474   an_array-&gt;<a class="code" href="structchar__array.html#ae2389996d16d5042051c140ce66db2ad">nitems</a> = nitems;
<a name="l00475"></a>00475 
<a name="l00476"></a>00476   <span class="keywordflow">if</span> (nitems &gt; 0)
<a name="l00477"></a>00477     {
<a name="l00478"></a>00478       <span class="comment">// copy the input in a local string</span>
<a name="l00479"></a>00479       strcpy(input, input_line);
<a name="l00480"></a>00480 
<a name="l00481"></a>00481       <span class="comment">// search for the first token</span>
<a name="l00482"></a>00482       tok = strtok(input, tokens);
<a name="l00483"></a>00483 
<a name="l00484"></a>00484       <span class="comment">// iterate while a token exists</span>
<a name="l00485"></a>00485       index = 0;
<a name="l00486"></a>00486       <span class="keywordflow">while</span>(tok)
<a name="l00487"></a>00487         {
<a name="l00488"></a>00488           <span class="comment">// copy the token to the array structure</span>
<a name="l00489"></a>00489           strcpy(an_array-&gt;<a class="code" href="structchar__array.html#a87868716aa2096e6891988b6a19f5e78">char_items</a>[index], tok);
<a name="l00490"></a>00490           index ++;
<a name="l00491"></a>00491           
<a name="l00492"></a>00492           <span class="comment">// search for the next token</span>
<a name="l00493"></a>00493           tok = strtok(NULL, tokens);
<a name="l00494"></a>00494         }
<a name="l00495"></a>00495     }
<a name="l00496"></a>00496 
<a name="l00497"></a>00497   <span class="comment">// return the strucutre</span>
<a name="l00498"></a>00498   <span class="keywordflow">return</span> an_array;
<a name="l00499"></a>00499 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a880cc2a273358cd9dc41dcc6a2dbea04"></a><!-- doxytag: member="inima_utils.c::get_nitems" ref="a880cc2a273358cd9dc41dcc6a2dbea04" args="(char input_line[], char tokens[])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int get_nitems </td>
          <td>(</td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>input_line</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>tokens</em>[]</td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function: get_nitems The function determines and returns the number of items in the input string when using the second parameter as token.</p>
<p>Parameters: </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>input_line</em>&nbsp;</td><td>- the character string to analyze </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tokens</em>&nbsp;</td><td>- the tokens to split the string</td></tr>
  </table>
  </dd>
</dl>
<p>Returns: </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>nitems - number of items in the string </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00559"></a>00559 {
<a name="l00560"></a>00560   <span class="keywordtype">char</span> input[<a class="code" href="spc__cfg_8h.html#a7cb4067a69f1bac9fa25877339c97ab8">LINE_LEN_MAX</a>];
<a name="l00561"></a>00561   <span class="keywordtype">char</span> *tok;
<a name="l00562"></a>00562 
<a name="l00563"></a>00563   <span class="keywordtype">int</span> ntoken=0;
<a name="l00564"></a>00564 
<a name="l00565"></a>00565   <span class="comment">// copy the input in a local string</span>
<a name="l00566"></a>00566   strcpy(input, input_line);
<a name="l00567"></a>00567 
<a name="l00568"></a>00568   <span class="comment">// search for the first token</span>
<a name="l00569"></a>00569   tok = strtok(input, tokens);
<a name="l00570"></a>00570 
<a name="l00571"></a>00571   <span class="comment">// iterate while a token exists</span>
<a name="l00572"></a>00572   <span class="keywordflow">while</span>(tok)
<a name="l00573"></a>00573     {
<a name="l00574"></a>00574       <span class="comment">// increase the counter</span>
<a name="l00575"></a>00575       ntoken++;
<a name="l00576"></a>00576 
<a name="l00577"></a>00577       <span class="comment">// search for the next token</span>
<a name="l00578"></a>00578       tok = strtok(NULL, tokens);
<a name="l00579"></a>00579     }
<a name="l00580"></a>00580 
<a name="l00581"></a>00581   <span class="comment">// </span>
<a name="l00582"></a>00582   <span class="keywordflow">return</span> ntoken;
<a name="l00583"></a>00583 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aeeac181d0eee781be4340cf86addf1bb"></a><!-- doxytag: member="inima_utils.c::is_valid_inima_line" ref="aeeac181d0eee781be4340cf86addf1bb" args="(char input_line[])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int is_valid_inima_line </td>
          <td>(</td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>input_line</em>[]</td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function: is_valid_inima_line Checks whether a character string is a valid line in an input image list, which means it has zero length and does not start with a '#'. The function returns the number of items for valid lines and 0 otherwise.</p>
<p>Parameters: </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>input_line</em>&nbsp;</td><td>- the character string to analyze</td></tr>
  </table>
  </dd>
</dl>
<p>Returns: </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>nitems - the number of items using blank as separator </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00515"></a>00515 {
<a name="l00516"></a>00516   <span class="keywordtype">char</span> input[<a class="code" href="spc__cfg_8h.html#a7cb4067a69f1bac9fa25877339c97ab8">LINE_LEN_MAX</a>];
<a name="l00517"></a>00517   <span class="keywordtype">char</span> trim_input[<a class="code" href="spc__cfg_8h.html#a7cb4067a69f1bac9fa25877339c97ab8">LINE_LEN_MAX</a>];
<a name="l00518"></a>00518 
<a name="l00519"></a>00519   <span class="keywordtype">char</span> comment[2] = <span class="stringliteral">&quot;#&quot;</span>;
<a name="l00520"></a>00520 
<a name="l00521"></a>00521   <span class="keywordtype">int</span> nitems = 0;
<a name="l00522"></a>00522 
<a name="l00523"></a>00523   <span class="comment">// copy the input in a local string</span>
<a name="l00524"></a>00524   strcpy(input, input_line);
<a name="l00525"></a>00525 
<a name="l00526"></a>00526   <span class="comment">// check whether there is something at all</span>
<a name="l00527"></a>00527   <span class="keywordflow">if</span> (strlen(input) == 0)
<a name="l00528"></a>00528     <span class="keywordflow">return</span> 0;
<a name="l00529"></a>00529 
<a name="l00530"></a>00530   <span class="comment">// trim the input line</span>
<a name="l00531"></a>00531   <a class="code" href="inima__utils_8c.html#a14ba84193a14d8e152018858dbac07b4">trim</a>(input, trim_input);
<a name="l00532"></a>00532   
<a name="l00533"></a>00533   <span class="comment">// check whether the line is commented</span>
<a name="l00534"></a>00534   <span class="keywordflow">if</span> (!strncmp(trim_input, comment, 1))
<a name="l00535"></a>00535     <span class="keywordflow">return</span> 0;
<a name="l00536"></a>00536 
<a name="l00537"></a>00537   <span class="comment">// get the number of items in the line</span>
<a name="l00538"></a>00538   nitems = <a class="code" href="inima__utils_8c.html#a880cc2a273358cd9dc41dcc6a2dbea04">get_nitems</a>(trim_input, <span class="stringliteral">&quot; &quot;</span>);
<a name="l00539"></a>00539 
<a name="l00540"></a>00540   <span class="comment">// return the number of items</span>
<a name="l00541"></a>00541   <span class="keywordflow">return</span> nitems;
<a name="l00542"></a>00542 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a1caa9871ceda5b9804538463e2938f00"></a><!-- doxytag: member="inima_utils.c::print_axe_inputs" ref="a1caa9871ceda5b9804538463e2938f00" args="(axe_inputs *in_list)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void print_axe_inputs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structaxe__inputs.html">axe_inputs</a> *&nbsp;</td>
          <td class="paramname"> <em>in_list</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function: print_axe_inputs</p>
<p>Print the content of the structure onto the screen.</p>
<p>Parameters: </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>in_list</em>&nbsp;</td><td>- the aXe input structure</td></tr>
  </table>
  </dd>
</dl>
<p>Returns: </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>- </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00740"></a>00740 {
<a name="l00741"></a>00741   <span class="keywordtype">int</span> index;
<a name="l00742"></a>00742 
<a name="l00743"></a>00743   <span class="comment">// go over all entries</span>
<a name="l00744"></a>00744   <span class="keywordflow">for</span> (index=0; index &lt; in_list-&gt;<a class="code" href="structaxe__inputs.html#a0cd390c5a8f9bb931dffdfee8f646e19">nitems</a>; index++)
<a name="l00745"></a>00745     {
<a name="l00746"></a>00746       <span class="comment">// print the basic input onto the screen</span>
<a name="l00747"></a>00747       fprintf(stdout, <span class="stringliteral">&quot;(%i) Grism: %s, IOL: %s, Conf: %s&quot;</span>, index + 1,
<a name="l00748"></a>00748               in_list-&gt;<a class="code" href="structaxe__inputs.html#a037661a38868809f953a4a2e47140b88">axe_items</a>[index].<a class="code" href="structbasic__input.html#a051fdba94c858cc9fb7e8fc53aa0cef3">grism_file</a>,
<a name="l00749"></a>00749               in_list-&gt;<a class="code" href="structaxe__inputs.html#a037661a38868809f953a4a2e47140b88">axe_items</a>[index].<a class="code" href="structbasic__input.html#aa59577abc77308875fd9a0e102a2bbb2">iol_cat</a>, 
<a name="l00750"></a>00750               in_list-&gt;<a class="code" href="structaxe__inputs.html#a037661a38868809f953a4a2e47140b88">axe_items</a>[index].<a class="code" href="structbasic__input.html#ae727f03bb293ff762d591d577d08f9c4">config_file</a>); 
<a name="l00751"></a>00751 
<a name="l00752"></a>00752       <span class="comment">// print the direct image name, if there is any</span>
<a name="l00753"></a>00753       <span class="keywordflow">if</span> (strlen(in_list-&gt;<a class="code" href="structaxe__inputs.html#a037661a38868809f953a4a2e47140b88">axe_items</a>[index].<a class="code" href="structbasic__input.html#a7abc1ca0b2f0e2baa263a5cd29015ded">dirima_file</a>) &gt; 0)
<a name="l00754"></a>00754         fprintf(stdout, <span class="stringliteral">&quot;, Direct: %s&quot;</span>, in_list-&gt;<a class="code" href="structaxe__inputs.html#a037661a38868809f953a4a2e47140b88">axe_items</a>[index].<a class="code" href="structbasic__input.html#a7abc1ca0b2f0e2baa263a5cd29015ded">dirima_file</a>);
<a name="l00755"></a>00755 
<a name="l00756"></a>00756       <span class="comment">// print the dmag value</span>
<a name="l00757"></a>00757       fprintf(stdout, <span class="stringliteral">&quot;, Dmag: %f&quot;</span>, in_list-&gt;<a class="code" href="structaxe__inputs.html#a037661a38868809f953a4a2e47140b88">axe_items</a>[index].<a class="code" href="structbasic__input.html#af35e90aa0f78ac5e17303fcd332f1423">dmag</a>);
<a name="l00758"></a>00758 
<a name="l00759"></a>00759       <span class="comment">// print a new line</span>
<a name="l00760"></a>00760       fprintf(stdout, <span class="stringliteral">&quot;\n&quot;</span>);
<a name="l00761"></a>00761     }
<a name="l00762"></a>00762 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aced1a5c36aa2d862ae401791f3cbae64"></a><!-- doxytag: member="inima_utils.c::print_char_array" ref="aced1a5c36aa2d862ae401791f3cbae64" args="(char_array *an_array)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void print_char_array </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structchar__array.html">char_array</a> *&nbsp;</td>
          <td class="paramname"> <em>an_array</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function: print_char_array The function prints the content of a character array onto the screen.</p>
<p>Parameters: </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>an_array</em>&nbsp;</td><td>- the character array</td></tr>
  </table>
  </dd>
</dl>
<p>Returns: </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>- </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00664"></a>00664 {
<a name="l00665"></a>00665   <span class="keywordtype">int</span> i;
<a name="l00666"></a>00666 
<a name="l00667"></a>00667   <span class="keywordflow">for</span> (i=0; i &lt; an_array-&gt;<a class="code" href="structchar__array.html#ae2389996d16d5042051c140ce66db2ad">nitems</a>; i++)
<a name="l00668"></a>00668     {
<a name="l00669"></a>00669       fprintf(stdout, <span class="stringliteral">&quot;item %i: %s&quot;</span>, i+1, an_array-&gt;<a class="code" href="structchar__array.html#a87868716aa2096e6891988b6a19f5e78">char_items</a>[i]);
<a name="l00670"></a>00670     }
<a name="l00671"></a>00671   fprintf(stdout, <span class="stringliteral">&quot;\n&quot;</span>);
<a name="l00672"></a>00672 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a14ba84193a14d8e152018858dbac07b4"></a><!-- doxytag: member="inima_utils.c::trim" ref="a14ba84193a14d8e152018858dbac07b4" args="(char inString[], char outString[])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* trim </td>
          <td>(</td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>inString</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>outString</em>[]</td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Function: trim Trim leading and trailing blank charachters from a string. blank charachters are the one recognised as such by the isspace lib function (Space, horizontal and vertical tab, form feed, carriage return).</p>
<p>Parameters: </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>inString</em>&nbsp;</td><td>- the input string </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>outString</em>&nbsp;</td><td>- the output string</td></tr>
  </table>
  </dd>
</dl>
<p>Returns: </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>- </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00778"></a>00778 {
<a name="l00779"></a>00779   <span class="keywordtype">int</span> headIndex = 0;
<a name="l00780"></a>00780   <span class="keywordtype">int</span> tailIndex = 0;
<a name="l00781"></a>00781   <span class="keywordtype">int</span> outputLength = 0;
<a name="l00782"></a>00782   
<a name="l00783"></a>00783   <span class="keywordflow">if</span> (inString == NULL) { <span class="keywordflow">return</span> NULL; }
<a name="l00784"></a>00784   
<a name="l00785"></a>00785   tailIndex = strlen(inString) - 1; <span class="comment">// Last char index in the input (excluding the &apos;\0&apos;) </span>
<a name="l00786"></a>00786   
<a name="l00787"></a>00787   <span class="comment">// Get rid of the leading blanks:</span>
<a name="l00788"></a>00788   <span class="keywordflow">while</span> (isspace(inString[headIndex]) &amp;&amp; (headIndex &lt;= tailIndex)) {headIndex++; }
<a name="l00789"></a>00789   
<a name="l00790"></a>00790   <span class="comment">// Get rid of the trailing blanks:</span>
<a name="l00791"></a>00791   <span class="keywordflow">while</span> (isspace(inString[tailIndex]) &amp;&amp; (tailIndex &gt; headIndex)) {tailIndex--; }
<a name="l00792"></a>00792   
<a name="l00793"></a>00793   <span class="comment">// compute the total length</span>
<a name="l00794"></a>00794   <span class="comment">// add one for the null character</span>
<a name="l00795"></a>00795   outputLength = tailIndex - headIndex + 1; 
<a name="l00796"></a>00796   
<a name="l00797"></a>00797   <span class="comment">// copy over from input to output</span>
<a name="l00798"></a>00798   strncpy(outString, &amp;inString[headIndex], outputLength);
<a name="l00799"></a>00799 
<a name="l00800"></a>00800   <span class="comment">// add the null character</span>
<a name="l00801"></a>00801   outString[outputLength] = <span class="charliteral">&apos;\0&apos;</span>;
<a name="l00802"></a>00802 
<a name="l00803"></a>00803   <span class="comment">// just for fun, return also</span>
<a name="l00804"></a>00804   <span class="comment">// the result here</span>
<a name="l00805"></a>00805   <span class="keywordflow">return</span> outString; 
<a name="l00806"></a>00806 }
</pre></div></p>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on 12 Oct 2014 for TIPS by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
