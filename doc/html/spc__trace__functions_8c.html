<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TIPS: /renoir/fourmano/Desktop/OUSIM/TIPS/branches/tips_build/src/axesim/spc_trace_functions.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>/renoir/fourmano/Desktop/OUSIM/TIPS/branches/tips_build/src/axesim/spc_trace_functions.c File Reference</h1><code>#include &quot;<a class="el" href="spc__trace__functions_8h_source.html">spc_trace_functions.h</a>&quot;</code><br/>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Namespaces</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">namespace &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacespc__trace__functions.html">spc_trace_functions</a></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="spc__trace__functions_8c.html#a62cfdbae2901767baacdb5f739a38fa2">poly2</a> (const double x, const void *const pars)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="spc__trace__functions_8c.html#af366e3672e94a5dbfdb65f6f129a684f">polyN</a> (const double x, const void *const pars)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="spc__trace__functions_8c.html#a13432cb3ca56e63f09c0f0b0e381196e">poly2_deriv</a> (const double x, const void *const pars)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="spc__trace__functions_8c.html#a930dbe5cd9c124d5ce4d32d1ceecc8d9">polyN_deriv</a> (const double x, const void *const pars)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="spc__trace__functions_8c.html#acea025404ad9bbdcf170b80c5b06e0bb">polyN_ds</a> (double x, void *pars)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="spc__trace__functions_8c.html#a7b1421bc9030ce1e7b0ed12d488a0f36">poly2_pathlen</a> (const double x, const void *const pars)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="spc__trace__functions_8c.html#a19840a47ae1cd2592db06d648cecac7d">polyN_pathlen</a> (const double x, const void *const pars)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structtrace__func.html">trace_func</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="spc__trace__functions_8c.html#aa0286b1a730a1dcf027f685ed7655a0e">create_poly2</a> (const double a0, const double a1, const double a2)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structtrace__func.html">trace_func</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="spc__trace__functions_8c.html#a37d4651793aa16a39c74e145687ca705">create_polyN</a> (gsl_vector *v)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structtrace__func.html">trace_func</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="spc__trace__functions_8c.html#ad575e70b1bef463a089f8570c0674e51">vector_to_trace_poly2</a> (gsl_vector *v)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structtrace__func.html">trace_func</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="spc__trace__functions_8c.html#a63f2dd8f35451e510ac0347532bd4b91">vector_to_trace_polyN</a> (gsl_vector *v)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="spc__trace__functions_8c.html#a1fa07d461a1154b16418e8565db86cc8">free_poly2</a> (<a class="el" href="structtrace__func.html">trace_func</a> *func)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="spc__trace__functions_8c.html#a91716a5e9814e72c4d94add2911d60e4">free_polyN</a> (<a class="el" href="structtrace__func.html">trace_func</a> *func)</td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="aa0286b1a730a1dcf027f685ed7655a0e"></a><!-- doxytag: member="spc_trace_functions.c::create_poly2" ref="aa0286b1a730a1dcf027f685ed7655a0e" args="(const double a0, const double a1, const double a2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtrace__func.html">trace_func</a>* create_poly2 </td>
          <td>(</td>
          <td class="paramtype">const double&nbsp;</td>
          <td class="paramname"> <em>a0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&nbsp;</td>
          <td class="paramname"> <em>a1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&nbsp;</td>
          <td class="paramname"> <em>a2</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>creates a 2nd order polynomial trace function</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>a0</em>&nbsp;</td><td>coefficient for x^0 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>a1</em>&nbsp;</td><td>coefficient for x^1 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>a2</em>&nbsp;</td><td>coefficient for x^2 </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>allocated <a class="el" href="structtrace__func.html">trace_func</a> structure or NULL for failure </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00189"></a>00189 {
<a name="l00190"></a>00190      <a class="code" href="structtrace__func.html">trace_func</a> *func = malloc (<span class="keyword">sizeof</span> (<a class="code" href="structtrace__func.html">trace_func</a>));
<a name="l00191"></a>00191      <span class="keywordtype">double</span> *cf;
<a name="l00192"></a>00192 
<a name="l00193"></a>00193      <span class="keywordflow">if</span> (!func)
<a name="l00194"></a>00194        {
<a name="l00195"></a>00195             <a class="code" href="aXe__errors_8c.html#a7ef7588e5f91237ba7ce4084e6ed3c11">aXe_message</a> (<a class="code" href="aXe__errors_8h.html#a2556a67874555249b07691c37aa6d6e9">aXe_M_FATAL</a>, __FILE__, __LINE__,
<a name="l00196"></a>00196                          <span class="stringliteral">&quot;create_poly2: Out of memory&quot;</span>);
<a name="l00197"></a>00197        }
<a name="l00198"></a>00198      <span class="keywordflow">if</span> (!(cf = malloc (3 * <span class="keyword">sizeof</span> (<span class="keywordtype">double</span>))))
<a name="l00199"></a>00199        {
<a name="l00200"></a>00200             free (func);
<a name="l00201"></a>00201             func = NULL;
<a name="l00202"></a>00202             <a class="code" href="aXe__errors_8c.html#a7ef7588e5f91237ba7ce4084e6ed3c11">aXe_message</a> (<a class="code" href="aXe__errors_8h.html#a2556a67874555249b07691c37aa6d6e9">aXe_M_FATAL</a>, __FILE__, __LINE__,
<a name="l00203"></a>00203                          <span class="stringliteral">&quot;create_poly2: Out of memory&quot;</span>);
<a name="l00204"></a>00204        }
<a name="l00205"></a>00205      func-&gt;<a class="code" href="structtrace__func.html#a7c1a538b7ae1293d6e0fc1bdd4c2739c">func</a> = <a class="code" href="spc__trace__functions_8c.html#a62cfdbae2901767baacdb5f739a38fa2">poly2</a>;
<a name="l00206"></a>00206      func-&gt;<a class="code" href="structtrace__func.html#acdda34da0c92344832184081c6f41718">deriv</a> = <a class="code" href="spc__trace__functions_8c.html#a13432cb3ca56e63f09c0f0b0e381196e">poly2_deriv</a>;
<a name="l00207"></a>00207      func-&gt;<a class="code" href="structtrace__func.html#a0d9e428a3734aaad170ce069be219f32">path_len</a> = <a class="code" href="spc__trace__functions_8c.html#a7b1421bc9030ce1e7b0ed12d488a0f36">poly2_pathlen</a>;
<a name="l00208"></a>00208      func-&gt;<a class="code" href="structtrace__func.html#aa610d641940ef4a567aef884dd0b32da">data</a> = cf;
<a name="l00209"></a>00209      func-&gt;<a class="code" href="structtrace__func.html#aedeeb1989f1f33f55e7c641f9510864e">type</a> = 2;
<a name="l00210"></a>00210      cf[0] = a0;
<a name="l00211"></a>00211      cf[1] = a1;
<a name="l00212"></a>00212      cf[2] = a2;
<a name="l00213"></a>00213 
<a name="l00214"></a>00214      <span class="keywordflow">return</span> func;
<a name="l00215"></a>00215 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a37d4651793aa16a39c74e145687ca705"></a><!-- doxytag: member="spc_trace_functions.c::create_polyN" ref="a37d4651793aa16a39c74e145687ca705" args="(gsl_vector *v)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtrace__func.html">trace_func</a>* create_polyN </td>
          <td>(</td>
          <td class="paramtype">gsl_vector *&nbsp;</td>
          <td class="paramname"> <em>v</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>creates a Nth order polynomial trace function</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>a</em>&nbsp;</td><td>pointer to a gsl_vector containing the coeeficients </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>allocated <a class="el" href="structtrace__func.html">trace_func</a> structure or NULL for failure </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00225"></a>00225 {
<a name="l00226"></a>00226   <a class="code" href="structtrace__func.html">trace_func</a> *func = malloc (<span class="keyword">sizeof</span> (<a class="code" href="structtrace__func.html">trace_func</a>));
<a name="l00227"></a>00227   <span class="keywordtype">double</span> *cf;
<a name="l00228"></a>00228   <span class="keywordtype">int</span> i;
<a name="l00229"></a>00229 
<a name="l00230"></a>00230   <span class="comment">//fprintf(stderr,&quot;CREATING %d\n&quot;,v-&gt;size);</span>
<a name="l00231"></a>00231   <span class="keywordflow">if</span> (!func)
<a name="l00232"></a>00232     {
<a name="l00233"></a>00233       <a class="code" href="aXe__errors_8c.html#a7ef7588e5f91237ba7ce4084e6ed3c11">aXe_message</a> (<a class="code" href="aXe__errors_8h.html#a2556a67874555249b07691c37aa6d6e9">aXe_M_FATAL</a>, __FILE__, __LINE__,
<a name="l00234"></a>00234                    <span class="stringliteral">&quot;create_polyN: Out of memory&quot;</span>);
<a name="l00235"></a>00235     }
<a name="l00236"></a>00236   <span class="keywordflow">if</span> (!(cf = malloc ((v-&gt;size +1) * sizeof (<span class="keywordtype">double</span>))))
<a name="l00237"></a>00237     {
<a name="l00238"></a>00238       free (func);
<a name="l00239"></a>00239       func = NULL;
<a name="l00240"></a>00240       <a class="code" href="aXe__errors_8c.html#a7ef7588e5f91237ba7ce4084e6ed3c11">aXe_message</a> (<a class="code" href="aXe__errors_8h.html#a2556a67874555249b07691c37aa6d6e9">aXe_M_FATAL</a>, __FILE__, __LINE__,
<a name="l00241"></a>00241                    <span class="stringliteral">&quot;create_polyN: Out of memory&quot;</span>);
<a name="l00242"></a>00242     }
<a name="l00243"></a>00243 
<a name="l00244"></a>00244   func-&gt;<a class="code" href="structtrace__func.html#a7c1a538b7ae1293d6e0fc1bdd4c2739c">func</a> = <a class="code" href="spc__trace__functions_8c.html#af366e3672e94a5dbfdb65f6f129a684f">polyN</a>;
<a name="l00245"></a>00245   func-&gt;<a class="code" href="structtrace__func.html#acdda34da0c92344832184081c6f41718">deriv</a> = <a class="code" href="spc__trace__functions_8c.html#a930dbe5cd9c124d5ce4d32d1ceecc8d9">polyN_deriv</a>;
<a name="l00246"></a>00246   func-&gt;<a class="code" href="structtrace__func.html#a0d9e428a3734aaad170ce069be219f32">path_len</a> = <a class="code" href="spc__trace__functions_8c.html#a19840a47ae1cd2592db06d648cecac7d">polyN_pathlen</a>;
<a name="l00247"></a>00247   func-&gt;<a class="code" href="structtrace__func.html#aa610d641940ef4a567aef884dd0b32da">data</a> = cf;
<a name="l00248"></a>00248   func-&gt;<a class="code" href="structtrace__func.html#aedeeb1989f1f33f55e7c641f9510864e">type</a> = v-&gt;size - 1;
<a name="l00249"></a>00249   cf[0] = v-&gt;size;
<a name="l00250"></a>00250   <span class="keywordflow">for</span> (i=0;i&lt;(v-&gt;size);i++)
<a name="l00251"></a>00251     {
<a name="l00252"></a>00252       cf[i+1]=gsl_vector_get (v, i);
<a name="l00253"></a>00253     }
<a name="l00254"></a>00254 
<a name="l00255"></a>00255   <span class="keywordflow">return</span> func;
<a name="l00256"></a>00256 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a1fa07d461a1154b16418e8565db86cc8"></a><!-- doxytag: member="spc_trace_functions.c::free_poly2" ref="a1fa07d461a1154b16418e8565db86cc8" args="(trace_func *func)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void free_poly2 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrace__func.html">trace_func</a> *&nbsp;</td>
          <td class="paramname"> <em>func</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Free the <a class="el" href="structtrace__func.html">trace_func</a> struct for a 2nd order polynomial.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>func</em>&nbsp;</td><td>the <a class="el" href="structtrace__func.html">trace_func</a> struct. </td></tr>
  </table>
  </dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00318"></a>00318 {
<a name="l00319"></a>00319      free (func-&gt;<a class="code" href="structtrace__func.html#aa610d641940ef4a567aef884dd0b32da">data</a>);
<a name="l00320"></a>00320      func-&gt;<a class="code" href="structtrace__func.html#aa610d641940ef4a567aef884dd0b32da">data</a> = NULL;
<a name="l00321"></a>00321      free (func);
<a name="l00322"></a>00322      func = NULL;
<a name="l00323"></a>00323 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a91716a5e9814e72c4d94add2911d60e4"></a><!-- doxytag: member="spc_trace_functions.c::free_polyN" ref="a91716a5e9814e72c4d94add2911d60e4" args="(trace_func *func)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void free_polyN </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtrace__func.html">trace_func</a> *&nbsp;</td>
          <td class="paramname"> <em>func</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Free the <a class="el" href="structtrace__func.html">trace_func</a> struct for a Nth order polynomial.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>func</em>&nbsp;</td><td>the <a class="el" href="structtrace__func.html">trace_func</a> struct. </td></tr>
  </table>
  </dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00332"></a>00332 {
<a name="l00333"></a>00333   free (func-&gt;<a class="code" href="structtrace__func.html#aa610d641940ef4a567aef884dd0b32da">data</a>);
<a name="l00334"></a>00334   func-&gt;<a class="code" href="structtrace__func.html#aa610d641940ef4a567aef884dd0b32da">data</a> = NULL;
<a name="l00335"></a>00335   free (func);
<a name="l00336"></a>00336   func = NULL;
<a name="l00337"></a>00337 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a62cfdbae2901767baacdb5f739a38fa2"></a><!-- doxytag: member="spc_trace_functions.c::poly2" ref="a62cfdbae2901767baacdb5f739a38fa2" args="(const double x, const void *const pars)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double poly2 </td>
          <td>(</td>
          <td class="paramtype">const double&nbsp;</td>
          <td class="paramname"> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *const &nbsp;</td>
          <td class="paramname"> <em>pars</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>A polynom of degree two.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>x</em>&nbsp;</td><td>the abscissa, usually relative to the beam's reference point. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pars</em>&nbsp;</td><td>a pointer four doubles, the length (3) and the coefficients of the polynom. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the value of the polynom at x. </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00031"></a>00031 {
<a name="l00032"></a>00032      <span class="keyword">const</span> <span class="keywordtype">double</span> *<span class="keyword">const</span> coeffs = pars;
<a name="l00033"></a>00033 
<a name="l00034"></a>00034      <span class="keywordflow">return</span> coeffs[1] + (coeffs[2] + (coeffs[3] * x)) * x;
<a name="l00035"></a>00035 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a13432cb3ca56e63f09c0f0b0e381196e"></a><!-- doxytag: member="spc_trace_functions.c::poly2_deriv" ref="a13432cb3ca56e63f09c0f0b0e381196e" args="(const double x, const void *const pars)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double poly2_deriv </td>
          <td>(</td>
          <td class="paramtype">const double&nbsp;</td>
          <td class="paramname"> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *const &nbsp;</td>
          <td class="paramname"> <em>pars</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The derivative of a polynom of degree two.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>x</em>&nbsp;</td><td>the abscissa, usually relative to the beam's reference point. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pars</em>&nbsp;</td><td>a pointer four doubles, the length (3) and the coefficients of the polynom. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the derivative of the polynom at x. </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00068"></a>00068 {
<a name="l00069"></a>00069      <span class="keyword">const</span> <span class="keywordtype">double</span> *<span class="keyword">const</span> coeffs = pars;
<a name="l00070"></a>00070 
<a name="l00071"></a>00071      <span class="keywordflow">return</span> coeffs[2] + 2 * coeffs[3] * x;
<a name="l00072"></a>00072 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a7b1421bc9030ce1e7b0ed12d488a0f36"></a><!-- doxytag: member="spc_trace_functions.c::poly2_pathlen" ref="a7b1421bc9030ce1e7b0ed12d488a0f36" args="(const double x, const void *const pars)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double poly2_pathlen </td>
          <td>(</td>
          <td class="paramtype">const double&nbsp;</td>
          <td class="paramname"> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *const &nbsp;</td>
          <td class="paramname"> <em>pars</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The path length of a polynom of degree two, relative to the point poly4(0). For higher polynoms, probably no such closed expression exists.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>x</em>&nbsp;</td><td>the abscissa, usually relative to the beam's reference point. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pars</em>&nbsp;</td><td>a pointer four doubles, the length (3) and the coefficients of the polynom. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the path lenght for the polynom at x. </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00122"></a>00122 {
<a name="l00123"></a>00123      <span class="keywordtype">double</span> a1 = ((<span class="keywordtype">double</span> *) pars)[2], a2 = ((<span class="keywordtype">double</span> *) pars)[3];
<a name="l00124"></a>00124 
<a name="l00125"></a>00125      <span class="keywordflow">if</span> (fabs (a2) &lt;= 1e-20)
<a name="l00126"></a>00126           <span class="keywordflow">return</span> sqrt (1 + a1 * a1) * x;
<a name="l00127"></a>00127 
<a name="l00128"></a>00128 
<a name="l00129"></a>00129      <span class="keywordflow">return</span> 1 / 4. / a2 * (2.0 *
<a name="l00130"></a>00130                            sqrt (1.0 + a1 * a1 + 4.0 * a1 * a2 * x +
<a name="l00131"></a>00131                                  4.0 * a2 * a2 * x * x) * a2 * x +
<a name="l00132"></a>00132                            log (2.0 * a2 * x + a1 +
<a name="l00133"></a>00133                                 sqrt (1.0 + a1 * a1 + 4.0 * a1 * a2 * x +
<a name="l00134"></a>00134                                       4.0 * a2 * a2 * x * x)) + sqrt (1.0 +
<a name="l00135"></a>00135                                                                       a1 *
<a name="l00136"></a>00136                                                                       a1 +
<a name="l00137"></a>00137                                                                       4.0 *
<a name="l00138"></a>00138                                                                       a1 *
<a name="l00139"></a>00139                                                                       a2 * x +
<a name="l00140"></a>00140                                                                       4.0 *
<a name="l00141"></a>00141                                                                       a2 *
<a name="l00142"></a>00142                                                                       a2 * x *
<a name="l00143"></a>00143                                                                       x) *
<a name="l00144"></a>00144                            a1 - sqrt (1.0 + a1 * a1) * a1 - log (a1 +
<a name="l00145"></a>00145                                                                  sqrt (1.0 +
<a name="l00146"></a>00146                                                                        a1 *
<a name="l00147"></a>00147                                                                        a1)));
<a name="l00148"></a>00148 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af366e3672e94a5dbfdb65f6f129a684f"></a><!-- doxytag: member="spc_trace_functions.c::polyN" ref="af366e3672e94a5dbfdb65f6f129a684f" args="(const double x, const void *const pars)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double polyN </td>
          <td>(</td>
          <td class="paramtype">const double&nbsp;</td>
          <td class="paramname"> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *const &nbsp;</td>
          <td class="paramname"> <em>pars</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>A polynom of degree N.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>x</em>&nbsp;</td><td>the abscissa, usually relative to the beam's reference point. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pars</em>&nbsp;</td><td>a pointer N+1 doubles, the length (N) and the coefficients of the polynom. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the value of the polynom at x. </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00046"></a>00046 {
<a name="l00047"></a>00047      <span class="keyword">const</span> <span class="keywordtype">double</span> *<span class="keyword">const</span> coeffs = pars;
<a name="l00048"></a>00048          <span class="keywordtype">int</span> i,N;
<a name="l00049"></a>00049          <span class="keywordtype">double</span> p=0.0;
<a name="l00050"></a>00050          N = (int) coeffs[0];
<a name="l00051"></a>00051         <span class="comment">//fprintf(stderr,&quot;----&gt;length:%d %d %d\n&quot;,sizeof(*coeffs),sizeof(double),N);</span>
<a name="l00052"></a>00052 
<a name="l00053"></a>00053          <span class="keywordflow">for</span> (i=0;i&lt;N;i++) {
<a name="l00054"></a>00054                 p += coeffs[i+1]*pow(x,i);
<a name="l00055"></a>00055          }
<a name="l00056"></a>00056      <span class="keywordflow">return</span> p;
<a name="l00057"></a>00057 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a930dbe5cd9c124d5ce4d32d1ceecc8d9"></a><!-- doxytag: member="spc_trace_functions.c::polyN_deriv" ref="a930dbe5cd9c124d5ce4d32d1ceecc8d9" args="(const double x, const void *const pars)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double polyN_deriv </td>
          <td>(</td>
          <td class="paramtype">const double&nbsp;</td>
          <td class="paramname"> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *const &nbsp;</td>
          <td class="paramname"> <em>pars</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The derivative of a polynom of degree N.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>x</em>&nbsp;</td><td>the abscissa, usually relative to the beam's reference point. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pars</em>&nbsp;</td><td>a pointer N+1 doubles, the length (N) and the coefficients of the polynom. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the derivative of the polynom at x. </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00083"></a>00083 {
<a name="l00084"></a>00084      <span class="keyword">const</span> <span class="keywordtype">double</span> *<span class="keyword">const</span> coeffs = pars;
<a name="l00085"></a>00085          <span class="keywordtype">int</span> i, N;
<a name="l00086"></a>00086          <span class="keywordtype">double</span> p=0.0;
<a name="l00087"></a>00087          
<a name="l00088"></a>00088          N = (int) coeffs[0];
<a name="l00089"></a>00089          <span class="keywordflow">for</span> (i=1;i&lt;N;i++) {
<a name="l00090"></a>00090                 <span class="comment">//fprintf(stderr,&quot;%d %f %d %f %f %f\n&quot;,i,coeffs[i+1],i-1,x,pow(x,i-1),p);</span>
<a name="l00091"></a>00091                 p += i*coeffs[i+1]*pow(x,i-1);
<a name="l00092"></a>00092                  }
<a name="l00093"></a>00093                  
<a name="l00094"></a>00094          <span class="comment">//fprintf(stderr,&quot;poly2deriv:%f polyNderiv:%f\n&quot;,poly2_deriv(x,pars),p);</span>
<a name="l00095"></a>00095      <span class="keywordflow">return</span> p;
<a name="l00096"></a>00096 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="acea025404ad9bbdcf170b80c5b06e0bb"></a><!-- doxytag: member="spc_trace_functions.c::polyN_ds" ref="acea025404ad9bbdcf170b80c5b06e0bb" args="(double x, void *pars)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double polyN_ds </td>
          <td>(</td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>pars</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>sqrt(1+(dy/dx)^2) of an N^th order polynomial</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>x</em>&nbsp;</td><td>the abscissa, usually relative to the beam's reference point. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pars</em>&nbsp;</td><td>a pointer N+1 doubles, the length (N) and the coefficients of the polynom. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the derivative of the polynom at x. </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00107"></a>00107 {       
<a name="l00108"></a>00108          <span class="keywordflow">return</span> sqrt(1.+pow(<a class="code" href="spc__trace__functions_8c.html#a930dbe5cd9c124d5ce4d32d1ceecc8d9">polyN_deriv</a>(x,pars),2.));
<a name="l00109"></a>00109 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a19840a47ae1cd2592db06d648cecac7d"></a><!-- doxytag: member="spc_trace_functions.c::polyN_pathlen" ref="a19840a47ae1cd2592db06d648cecac7d" args="(const double x, const void *const pars)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double polyN_pathlen </td>
          <td>(</td>
          <td class="paramtype">const double&nbsp;</td>
          <td class="paramname"> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *const &nbsp;</td>
          <td class="paramname"> <em>pars</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The path length of a polynom of degree two, relative to the point poly4(0). For higher polynoms, probably no such closed expression exists.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>x</em>&nbsp;</td><td>the abscissa, usually relative to the beam's reference point. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pars</em>&nbsp;</td><td>a pointer N+1 doubles, the length (N) and the coefficients of the polynom. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the path lenght for the polynom at x. </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00160"></a>00160 {
<a name="l00161"></a>00161         gsl_integration_workspace *w = gsl_integration_workspace_alloc(1000);
<a name="l00162"></a>00162         <span class="keywordtype">double</span> result, error;
<a name="l00163"></a>00163         gsl_function F;
<a name="l00164"></a>00164         F.function = &amp;<a class="code" href="spc__trace__functions_8c.html#acea025404ad9bbdcf170b80c5b06e0bb">polyN_ds</a>;
<a name="l00165"></a>00165 
<a name="l00166"></a>00166         <span class="comment">// new to avoid warning during compilation</span>
<a name="l00167"></a>00167         F.params = (<span class="keywordtype">void</span> *)pars;
<a name="l00168"></a>00168         <span class="comment">// old, with warning during compilation</span>
<a name="l00169"></a>00169         <span class="comment">//      F.params = pars;</span>
<a name="l00170"></a>00170         <span class="comment">//fprintf(stderr,&quot;HEREEEE 3\n&quot;);</span>
<a name="l00171"></a>00171         <span class="comment">//gsl_integration_qags (&amp;F, 0, x, 0, 1e-7, 1000, w, &amp;result, &amp;error);</span>
<a name="l00172"></a>00172         gsl_integration_qag (&amp;F, 0, x, 0, 1e-7, 1000, 6, w, &amp;result, &amp;error);
<a name="l00173"></a>00173         gsl_integration_workspace_free(w);
<a name="l00174"></a>00174         <span class="comment">//result=x;</span>
<a name="l00175"></a>00175         <span class="comment">//fprintf(stderr,&quot;===&gt; %f %f\n&quot;,result,poly2_pathlen(x,pars));</span>
<a name="l00176"></a>00176         <span class="keywordflow">return</span> result;
<a name="l00177"></a>00177 
<a name="l00178"></a>00178 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad575e70b1bef463a089f8570c0674e51"></a><!-- doxytag: member="spc_trace_functions.c::vector_to_trace_poly2" ref="ad575e70b1bef463a089f8570c0674e51" args="(gsl_vector *v)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtrace__func.html">trace_func</a>* vector_to_trace_poly2 </td>
          <td>(</td>
          <td class="paramtype">gsl_vector *&nbsp;</td>
          <td class="paramname"> <em>v</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>creates a 2nd order polynomial trace function using the coefficients contained in a gsl vector of length 1,2, or 3.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>v,a</em>&nbsp;</td><td>gsl vector containing polynomial coefficients. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>a pointer to new <a class="el" href="structtrace__func.html">trace_func</a> <a class="el" href="structobject.html">object</a> which contains a second order polynomial trace description </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00270"></a>00270 {
<a name="l00271"></a>00271                 
<a name="l00272"></a>00272         <span class="keywordtype">float</span> a0, a1, a2;
<a name="l00273"></a>00273 
<a name="l00274"></a>00274         <span class="keywordflow">if</span> (v-&gt;size&lt;1)
<a name="l00275"></a>00275                 <a class="code" href="aXe__errors_8c.html#a7ef7588e5f91237ba7ce4084e6ed3c11">aXe_message</a> (<a class="code" href="aXe__errors_8h.html#a2556a67874555249b07691c37aa6d6e9">aXe_M_FATAL</a>, __FILE__, __LINE__,
<a name="l00276"></a>00276                 <span class="stringliteral">&quot;Trace polynomial must at least have one coefficients (i.e. zeroth order).\n&quot;</span>
<a name="l00277"></a>00277                 <span class="stringliteral">&quot;Only %d found.&quot;</span>,v-&gt;size);
<a name="l00278"></a>00278         a0 = gsl_vector_get (v, 0);
<a name="l00279"></a>00279         <span class="keywordflow">if</span> (v-&gt;size&gt;1)
<a name="l00280"></a>00280                 a1 = gsl_vector_get (v, 1);
<a name="l00281"></a>00281         <span class="keywordflow">else</span>
<a name="l00282"></a>00282                 a1 = 0.0;
<a name="l00283"></a>00283         <span class="keywordflow">if</span> (v-&gt;size&gt;2)
<a name="l00284"></a>00284                 a2 = gsl_vector_get (v, 2);
<a name="l00285"></a>00285         <span class="keywordflow">else</span>
<a name="l00286"></a>00286                 a2 = 0.0;
<a name="l00287"></a>00287         <span class="keywordflow">if</span> (v-&gt;size&gt;3)
<a name="l00288"></a>00288                 <a class="code" href="aXe__errors_8c.html#a7ef7588e5f91237ba7ce4084e6ed3c11">aXe_message</a> (<a class="code" href="aXe__errors_8h.html#a3f3c2d017ceaf0b51cfb71efbcaeff44">aXe_M_WARN4</a>, __FILE__, __LINE__,   
<a name="l00289"></a>00289                 <span class="stringliteral">&quot;%d trace coefficients read but only 2nd order used!&quot;</span>,v-&gt;size);
<a name="l00290"></a>00290                 
<a name="l00291"></a>00291         <span class="keywordflow">return</span> <a class="code" href="spc__trace__functions_8c.html#aa0286b1a730a1dcf027f685ed7655a0e">create_poly2</a> (a0, a1, a2);
<a name="l00292"></a>00292 
<a name="l00293"></a>00293 
<a name="l00294"></a>00294 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a63f2dd8f35451e510ac0347532bd4b91"></a><!-- doxytag: member="spc_trace_functions.c::vector_to_trace_polyN" ref="a63f2dd8f35451e510ac0347532bd4b91" args="(gsl_vector *v)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtrace__func.html">trace_func</a>* vector_to_trace_polyN </td>
          <td>(</td>
          <td class="paramtype">gsl_vector *&nbsp;</td>
          <td class="paramname"> <em>v</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>creates a Nth order polynomial trace function using the coefficients contained in a gsl vector of length N.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>v,a</em>&nbsp;</td><td>gsl vector containing polynomial coefficients. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>a pointer to new <a class="el" href="structtrace__func.html">trace_func</a> <a class="el" href="structobject.html">object</a> which contains an Nth order polynomial trace description </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00307"></a>00307 {               
<a name="l00308"></a>00308   <span class="keywordflow">return</span> <a class="code" href="spc__trace__functions_8c.html#a37d4651793aa16a39c74e145687ca705">create_polyN</a> (v);
<a name="l00309"></a>00309 }
</pre></div></p>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on 12 Oct 2014 for TIPS by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
