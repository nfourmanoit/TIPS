<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>TIPS: /renoir/fourmano/Desktop/OUSIM/TIPS/branches/tips_build/include/axesim/spce_sect.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>/renoir/fourmano/Desktop/OUSIM/TIPS/branches/tips_build/include/axesim/spce_sect.h File Reference</h1><code>#include &lt;math.h&gt;</code><br/>
<code>#include &lt;gsl/gsl_roots.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="aXe__grism_8h_source.html">aXe_grism.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="spc__trace__functions_8h_source.html">spc_trace_functions.h</a>&quot;</code><br/>

<p><a href="spce__sect_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structgsl__interval.html">gsl_interval</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsectionfun.html">sectionfun</a></td></tr>
<tr><td colspan="2"><h2>Namespaces</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">namespace &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacespce__sect.html">spce_sect</a></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="spce__sect_8h.html#ae2cd18c10f324ea7c2f50a1fa7864709">fill_in_sectionfun</a> (<a class="el" href="structsectionfun.html">sectionfun</a> *const sf, const double inclination, const <a class="el" href="structbeam.html">beam</a> *const b)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="spce__sect_8h.html#ac1dac503ab0d34693a0ba15ab726ef81">find_section_point</a> (<a class="el" href="structsectionfun.html">sectionfun</a> *sf, const double x, const double y, double *const res)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="spce__sect_8h.html#a048f454707d142b74123b2122c3e68cd">free_sectionfun</a> (<a class="el" href="structsectionfun.html">sectionfun</a> *const sf)</td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ae2cd18c10f324ea7c2f50a1fa7864709"></a><!-- doxytag: member="spce_sect.h::fill_in_sectionfun" ref="ae2cd18c10f324ea7c2f50a1fa7864709" args="(sectionfun *const sf, const double inclination, const beam *const b)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fill_in_sectionfun </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsectionfun.html">sectionfun</a> *const &nbsp;</td>
          <td class="paramname"> <em>sf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&nbsp;</td>
          <td class="paramname"> <em>inclination</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structbeam.html">beam</a> *const &nbsp;</td>
          <td class="paramname"> <em>b</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>prepares a <a class="el" href="structsectionfun.html">sectionfun</a> structure</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sf</em>&nbsp;</td><td>a pointer to the structure to fill </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>inclination</em>&nbsp;</td><td>the slope of the line (orientation of the <a class="el" href="structobject.html">object</a>) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>b</em>&nbsp;</td><td>the current <a class="el" href="structbeam.html">beam</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 if successful, -1 otherwise </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00116"></a>00116 {
<a name="l00117"></a>00117   gsl_function *gf;
<a name="l00118"></a>00118   <a class="code" href="structgsl__interval.html">gsl_interval</a> *interv;
<a name="l00119"></a>00119   <span class="keywordtype">int</span> i;
<a name="l00120"></a>00120   <span class="keywordtype">double</span> delta_x, delta_y, slope, x0, y0, x, xr, yr;
<a name="l00121"></a>00121 
<a name="l00122"></a>00122   <span class="keywordflow">if</span> (fabs (inclination) &lt; 0.001)
<a name="l00123"></a>00123     {
<a name="l00124"></a>00124       sf-&gt;<a class="code" href="structsectionfun.html#aab0c499ac5e7d8871f5d88560f01e5ba">vertical</a> = 1;
<a name="l00125"></a>00125       <span class="keywordflow">return</span> 0;
<a name="l00126"></a>00126     }
<a name="l00127"></a>00127   <span class="keywordflow">else</span>
<a name="l00128"></a>00128     {
<a name="l00129"></a>00129       sf-&gt;<a class="code" href="structsectionfun.html#aab0c499ac5e7d8871f5d88560f01e5ba">vertical</a> = 0;
<a name="l00130"></a>00130     }
<a name="l00131"></a>00131   
<a name="l00132"></a>00132   sf-&gt;<a class="code" href="structsectionfun.html#a657c484c3b691ba3d76d582a972a8178">m</a> = tan (inclination);
<a name="l00133"></a>00133   sf-&gt;<a class="code" href="structsectionfun.html#ad5d55385480a9ee21cfdce5e6eb7fb94">func</a> = b-&gt;<a class="code" href="structbeam.html#a918b8655ff4142f173ca73226ce27922">spec_trace</a>;
<a name="l00134"></a>00134   
<a name="l00135"></a>00135   <span class="keywordflow">if</span> (!(gf = malloc (<span class="keyword">sizeof</span> (gsl_function))))
<a name="l00136"></a>00136     {
<a name="l00137"></a>00137       <span class="keywordflow">return</span> -1;
<a name="l00138"></a>00138     }
<a name="l00139"></a>00139   gf-&gt;function = &amp;<a class="code" href="spce__sect_8c.html#a538576535bfcbfb9bf80d947987d653f">compute_sectionfun</a>;
<a name="l00140"></a>00140   gf-&gt;params = sf;
<a name="l00141"></a>00141   
<a name="l00142"></a>00142   <span class="keywordflow">if</span> (!(interv = malloc (<span class="keyword">sizeof</span> (<a class="code" href="structgsl__interval.html">gsl_interval</a>))))
<a name="l00143"></a>00143     {
<a name="l00144"></a>00144       free (gf);
<a name="l00145"></a>00145       gf = NULL;
<a name="l00146"></a>00146       <span class="keywordflow">return</span> -1;
<a name="l00147"></a>00147     }
<a name="l00148"></a>00148 
<a name="l00149"></a>00149   interv-&gt;<a class="code" href="structgsl__interval.html#a3c4f4177152922856822282b1a9b47f6">lower</a> = b-&gt;<a class="code" href="structbeam.html#aa703d04290c347c35197ff52993b98f3">bbox</a>[0].<a class="code" href="structpx__point.html#ab715a558731a820a25b50bd7797dd004">x</a> - b-&gt;<a class="code" href="structbeam.html#a54c64670a8b3e8732c1468d156ddb0ca">refpoint</a>.<a class="code" href="structd__point.html#a922a3b5d82a119168ba85e5f939d02c3">x</a>;
<a name="l00150"></a>00150   interv-&gt;<a class="code" href="structgsl__interval.html#a29f7fc81635f7fc2896c524b48cb7640">upper</a> = b-&gt;<a class="code" href="structbeam.html#aa703d04290c347c35197ff52993b98f3">bbox</a>[1].<a class="code" href="structpx__point.html#ab715a558731a820a25b50bd7797dd004">x</a> - b-&gt;<a class="code" href="structbeam.html#a54c64670a8b3e8732c1468d156ddb0ca">refpoint</a>.<a class="code" href="structd__point.html#a922a3b5d82a119168ba85e5f939d02c3">x</a>;
<a name="l00151"></a>00151   
<a name="l00152"></a>00152   <span class="comment">/* find out slope of object w.r.t. the spectrum trace */</span>
<a name="l00153"></a>00153   xr = b-&gt;<a class="code" href="structbeam.html#a54c64670a8b3e8732c1468d156ddb0ca">refpoint</a>.<a class="code" href="structd__point.html#a922a3b5d82a119168ba85e5f939d02c3">x</a>;
<a name="l00154"></a>00154   yr = sf-&gt;<a class="code" href="structsectionfun.html#ad5d55385480a9ee21cfdce5e6eb7fb94">func</a>-&gt;<a class="code" href="structtrace__func.html#a7c1a538b7ae1293d6e0fc1bdd4c2739c">func</a> (0, sf-&gt;<a class="code" href="structsectionfun.html#ad5d55385480a9ee21cfdce5e6eb7fb94">func</a>-&gt;<a class="code" href="structtrace__func.html#aa610d641940ef4a567aef884dd0b32da">data</a>) + b-&gt;<a class="code" href="structbeam.html#a54c64670a8b3e8732c1468d156ddb0ca">refpoint</a>.<a class="code" href="structd__point.html#ad9846a025508bf8873a501ca5fcefbf4">y</a>;
<a name="l00155"></a>00155   delta_y =
<a name="l00156"></a>00156     b-&gt;<a class="code" href="structbeam.html#a918b8655ff4142f173ca73226ce27922">spec_trace</a>-&gt;<a class="code" href="structtrace__func.html#a7c1a538b7ae1293d6e0fc1bdd4c2739c">func</a> (interv-&gt;<a class="code" href="structgsl__interval.html#a3c4f4177152922856822282b1a9b47f6">lower</a>,
<a name="l00157"></a>00157                          b-&gt;<a class="code" href="structbeam.html#a918b8655ff4142f173ca73226ce27922">spec_trace</a>-&gt;<a class="code" href="structtrace__func.html#aa610d641940ef4a567aef884dd0b32da">data</a>) -
<a name="l00158"></a>00158     b-&gt;<a class="code" href="structbeam.html#a918b8655ff4142f173ca73226ce27922">spec_trace</a>-&gt;<a class="code" href="structtrace__func.html#a7c1a538b7ae1293d6e0fc1bdd4c2739c">func</a> (interv-&gt;<a class="code" href="structgsl__interval.html#a29f7fc81635f7fc2896c524b48cb7640">upper</a>, b-&gt;<a class="code" href="structbeam.html#a918b8655ff4142f173ca73226ce27922">spec_trace</a>-&gt;<a class="code" href="structtrace__func.html#aa610d641940ef4a567aef884dd0b32da">data</a>);
<a name="l00159"></a>00159   delta_x = interv-&gt;<a class="code" href="structgsl__interval.html#a3c4f4177152922856822282b1a9b47f6">lower</a> - interv-&gt;<a class="code" href="structgsl__interval.html#a29f7fc81635f7fc2896c524b48cb7640">upper</a>;
<a name="l00160"></a>00160   <span class="keywordflow">if</span> (fabs (delta_x) &lt; 1e-7)
<a name="l00161"></a>00161     {
<a name="l00162"></a>00162       <a class="code" href="aXe__errors_8c.html#a7ef7588e5f91237ba7ce4084e6ed3c11">aXe_message</a> (<a class="code" href="aXe__errors_8h.html#a2556a67874555249b07691c37aa6d6e9">aXe_M_FATAL</a>, __FILE__, __LINE__,
<a name="l00163"></a>00163                    <span class="stringliteral">&quot;Vanishing bounding box&quot;</span>);
<a name="l00164"></a>00164     }
<a name="l00165"></a>00165   slope = delta_y / delta_x;
<a name="l00166"></a>00166   <span class="keywordflow">if</span> (fabs (sf-&gt;<a class="code" href="structsectionfun.html#a657c484c3b691ba3d76d582a972a8178">m</a> - slope) &lt; 1e-7)
<a name="l00167"></a>00167     {
<a name="l00168"></a>00168       <a class="code" href="aXe__errors_8c.html#a7ef7588e5f91237ba7ce4084e6ed3c11">aXe_message</a> (<a class="code" href="aXe__errors_8h.html#a2556a67874555249b07691c37aa6d6e9">aXe_M_FATAL</a>, __FILE__, __LINE__,
<a name="l00169"></a>00169                    <span class="stringliteral">&quot;Spectrum trace and object&quot;</span>
<a name="l00170"></a>00170                    <span class="stringliteral">&quot; orientation are almost parallel&quot;</span>);
<a name="l00171"></a>00171     }
<a name="l00172"></a>00172 
<a name="l00173"></a>00173   <span class="comment">/* extend interval such that the section point should be found at</span>
<a name="l00174"></a>00174 <span class="comment">     least when everything is linear */</span>
<a name="l00175"></a>00175   <span class="keywordflow">for</span> (i = 0; i &lt; 4; i++)
<a name="l00176"></a>00176     {
<a name="l00177"></a>00177       x0 = b-&gt;<a class="code" href="structbeam.html#a785bab6bf808db6a8841654312d20899">corners</a>[i].<a class="code" href="structpx__point.html#ab715a558731a820a25b50bd7797dd004">x</a> - xr;
<a name="l00178"></a>00178       y0 = b-&gt;<a class="code" href="structbeam.html#a785bab6bf808db6a8841654312d20899">corners</a>[i].<a class="code" href="structpx__point.html#a2d02b900722a71f22a8d5100822bda61">y</a> - yr;
<a name="l00179"></a>00179       x = (y0 - x0 * sf-&gt;<a class="code" href="structsectionfun.html#a657c484c3b691ba3d76d582a972a8178">m</a>) / (slope - sf-&gt;<a class="code" href="structsectionfun.html#a657c484c3b691ba3d76d582a972a8178">m</a>);
<a name="l00180"></a>00180       <span class="keywordflow">if</span> (x &lt; interv-&gt;lower)
<a name="l00181"></a>00181         interv-&gt;<a class="code" href="structgsl__interval.html#a3c4f4177152922856822282b1a9b47f6">lower</a> = x;
<a name="l00182"></a>00182       <span class="keywordflow">if</span> (x &gt; interv-&gt;<a class="code" href="structgsl__interval.html#a29f7fc81635f7fc2896c524b48cb7640">upper</a>)
<a name="l00183"></a>00183         interv-&gt;<a class="code" href="structgsl__interval.html#a29f7fc81635f7fc2896c524b48cb7640">upper</a> = x;
<a name="l00184"></a>00184     }
<a name="l00185"></a>00185   
<a name="l00186"></a>00186   <span class="comment">/* choose something harmless to initialize the solver */</span>
<a name="l00187"></a>00187   sf-&gt;<a class="code" href="structsectionfun.html#a57e89a384211c3074227a9b459be3c4f">x0</a> = 1;
<a name="l00188"></a>00188   sf-&gt;<a class="code" href="structsectionfun.html#a6c35eb6e4aca39e7448423712e1179f2">y0</a> = 1;
<a name="l00189"></a>00189   <span class="keywordflow">if</span> (<a class="code" href="spce__sect_8c.html#a538576535bfcbfb9bf80d947987d653f">compute_sectionfun</a> (interv-&gt;<a class="code" href="structgsl__interval.html#a3c4f4177152922856822282b1a9b47f6">lower</a>, sf) *
<a name="l00190"></a>00190       <a class="code" href="spce__sect_8c.html#a538576535bfcbfb9bf80d947987d653f">compute_sectionfun</a> (interv-&gt;<a class="code" href="structgsl__interval.html#a29f7fc81635f7fc2896c524b48cb7640">upper</a>, sf) &gt;= 0)
<a name="l00191"></a>00191     {
<a name="l00192"></a>00192       <span class="comment">//aXe_message(aXe_M_FATAL, __FILE__, __LINE__, &quot;Invalid spectrum trace &quot;</span>
<a name="l00193"></a>00193       <span class="comment">//  &quot;function&quot;);</span>
<a name="l00194"></a>00194     }
<a name="l00195"></a>00195   sf-&gt;<a class="code" href="structsectionfun.html#a3eea06731198b02e52f5c8914648d28c">gslfun</a> = gf;
<a name="l00196"></a>00196   sf-&gt;<a class="code" href="structsectionfun.html#ae67f890cbfcb7e8bd9ed1228982ae5e5">interv</a> = interv;
<a name="l00197"></a>00197   sf-&gt;<a class="code" href="structsectionfun.html#a334da4ba5527ca09176f76cc35f63891">solver</a> = gsl_root_fsolver_alloc (gsl_root_fsolver_brent);
<a name="l00198"></a>00198   <span class="keywordflow">return</span> 0;
<a name="l00199"></a>00199 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac1dac503ab0d34693a0ba15ab726ef81"></a><!-- doxytag: member="spce_sect.h::find_section_point" ref="ac1dac503ab0d34693a0ba15ab726ef81" args="(sectionfun *sf, const double x, const double y, double *const res)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int find_section_point </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsectionfun.html">sectionfun</a> *&nbsp;</td>
          <td class="paramname"> <em>sf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&nbsp;</td>
          <td class="paramname"> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&nbsp;</td>
          <td class="paramname"> <em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *const &nbsp;</td>
          <td class="paramname"> <em>res</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>finds the section point between a line of given slope through a given point and a not too unreasonable function.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sf</em>&nbsp;</td><td>the section function descriptor, created by fill_in_sectionfun. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>x</em>&nbsp;</td><td>abscissa of the given point. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>x</em>&nbsp;</td><td>ordinate of the given point. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>res</em>&nbsp;</td><td>abscissa of section point. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 if section point could be found, -1 if not. </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00064"></a>00064 {
<a name="l00065"></a>00065   <span class="keywordtype">int</span> iter_count = 0;
<a name="l00066"></a>00066   <span class="keywordtype">double</span> x_lower, x_upper;
<a name="l00067"></a>00067   
<a name="l00068"></a>00068   <span class="keywordflow">if</span> (sf-&gt;<a class="code" href="structsectionfun.html#aab0c499ac5e7d8871f5d88560f01e5ba">vertical</a>)
<a name="l00069"></a>00069     {
<a name="l00070"></a>00070       *res = x;
<a name="l00071"></a>00071       <span class="keywordflow">return</span> 0;
<a name="l00072"></a>00072     }
<a name="l00073"></a>00073   
<a name="l00074"></a>00074   sf-&gt;<a class="code" href="structsectionfun.html#a57e89a384211c3074227a9b459be3c4f">x0</a> = x;
<a name="l00075"></a>00075   sf-&gt;<a class="code" href="structsectionfun.html#a6c35eb6e4aca39e7448423712e1179f2">y0</a> = y;
<a name="l00076"></a>00076   
<a name="l00077"></a>00077   <span class="keywordflow">if</span> (<a class="code" href="spce__sect_8c.html#a538576535bfcbfb9bf80d947987d653f">compute_sectionfun</a> (sf-&gt;<a class="code" href="structsectionfun.html#ae67f890cbfcb7e8bd9ed1228982ae5e5">interv</a>-&gt;<a class="code" href="structgsl__interval.html#a3c4f4177152922856822282b1a9b47f6">lower</a>, sf) *
<a name="l00078"></a>00078       <a class="code" href="spce__sect_8c.html#a538576535bfcbfb9bf80d947987d653f">compute_sectionfun</a> (sf-&gt;<a class="code" href="structsectionfun.html#ae67f890cbfcb7e8bd9ed1228982ae5e5">interv</a>-&gt;<a class="code" href="structgsl__interval.html#a29f7fc81635f7fc2896c524b48cb7640">upper</a>, sf) &gt;= 0)
<a name="l00079"></a>00079     {
<a name="l00080"></a>00080       <span class="keywordflow">return</span> -1;
<a name="l00081"></a>00081     }
<a name="l00082"></a>00082   gsl_root_fsolver_set (sf-&gt;<a class="code" href="structsectionfun.html#a334da4ba5527ca09176f76cc35f63891">solver</a>, sf-&gt;<a class="code" href="structsectionfun.html#a3eea06731198b02e52f5c8914648d28c">gslfun</a>, sf-&gt;<a class="code" href="structsectionfun.html#ae67f890cbfcb7e8bd9ed1228982ae5e5">interv</a>-&gt;<a class="code" href="structgsl__interval.html#a3c4f4177152922856822282b1a9b47f6">lower</a>,
<a name="l00083"></a>00083                         sf-&gt;<a class="code" href="structsectionfun.html#ae67f890cbfcb7e8bd9ed1228982ae5e5">interv</a>-&gt;<a class="code" href="structgsl__interval.html#a29f7fc81635f7fc2896c524b48cb7640">upper</a>);
<a name="l00084"></a>00084 
<a name="l00085"></a>00085   <span class="keywordflow">while</span> (1)
<a name="l00086"></a>00086     {
<a name="l00087"></a>00087       gsl_root_fsolver_iterate (sf-&gt;<a class="code" href="structsectionfun.html#a334da4ba5527ca09176f76cc35f63891">solver</a>);
<a name="l00088"></a>00088       x_lower = gsl_root_fsolver_x_lower (sf-&gt;<a class="code" href="structsectionfun.html#a334da4ba5527ca09176f76cc35f63891">solver</a>);
<a name="l00089"></a>00089       x_upper = gsl_root_fsolver_x_upper (sf-&gt;<a class="code" href="structsectionfun.html#a334da4ba5527ca09176f76cc35f63891">solver</a>);
<a name="l00090"></a>00090       <span class="keywordflow">if</span> (gsl_root_test_interval (x_lower, x_upper, 0.0001, 0.000001) ==
<a name="l00091"></a>00091           GSL_SUCCESS)
<a name="l00092"></a>00092         <span class="keywordflow">break</span>;
<a name="l00093"></a>00093       
<a name="l00094"></a>00094       <span class="keywordflow">if</span> (iter_count++ &gt; 100)
<a name="l00095"></a>00095         {
<a name="l00096"></a>00096           <span class="keywordflow">return</span> -1;
<a name="l00097"></a>00097         }
<a name="l00098"></a>00098     }
<a name="l00099"></a>00099 
<a name="l00100"></a>00100   *res = gsl_root_fsolver_root (sf-&gt;<a class="code" href="structsectionfun.html#a334da4ba5527ca09176f76cc35f63891">solver</a>);
<a name="l00101"></a>00101   <span class="keywordflow">return</span> 0;
<a name="l00102"></a>00102 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a048f454707d142b74123b2122c3e68cd"></a><!-- doxytag: member="spce_sect.h::free_sectionfun" ref="a048f454707d142b74123b2122c3e68cd" args="(sectionfun *const sf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void free_sectionfun </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsectionfun.html">sectionfun</a> *const &nbsp;</td>
          <td class="paramname"> <em>sf</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>releases the memory allocated in the fields of a <a class="el" href="structsectionfun.html">sectionfun</a> structure (but not the structure itself)</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sf</em>&nbsp;</td><td>the struct the children of which should be freed </td></tr>
  </table>
  </dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00211"></a>00211 {
<a name="l00212"></a>00212   <span class="keywordflow">if</span> (sf-&gt;<a class="code" href="structsectionfun.html#aab0c499ac5e7d8871f5d88560f01e5ba">vertical</a>)
<a name="l00213"></a>00213     {
<a name="l00214"></a>00214       <span class="keywordflow">return</span>;
<a name="l00215"></a>00215     }
<a name="l00216"></a>00216   gsl_root_fsolver_free (sf-&gt;<a class="code" href="structsectionfun.html#a334da4ba5527ca09176f76cc35f63891">solver</a>);
<a name="l00217"></a>00217   free (sf-&gt;<a class="code" href="structsectionfun.html#ae67f890cbfcb7e8bd9ed1228982ae5e5">interv</a>);
<a name="l00218"></a>00218   sf-&gt;<a class="code" href="structsectionfun.html#ae67f890cbfcb7e8bd9ed1228982ae5e5">interv</a> = NULL;
<a name="l00219"></a>00219   free (sf-&gt;<a class="code" href="structsectionfun.html#a3eea06731198b02e52f5c8914648d28c">gslfun</a>);
<a name="l00220"></a>00220   sf-&gt;<a class="code" href="structsectionfun.html#a3eea06731198b02e52f5c8914648d28c">gslfun</a> = NULL;
<a name="l00221"></a>00221 }
</pre></div></p>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on 12 Oct 2014 for TIPS by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
